{"version":3,"sources":["../../node_modules/riot/riot.js","tags.js","main.js"],"names":["global","factory","exports","module","define","amd","riot","$","selector","ctx","document","querySelector","__TAGS_CACHE","__TAG_IMPL","YIELD_TAG","GLOBAL_MIXIN","ATTRS_PREFIX","REF_DIRECTIVES","IS_DIRECTIVE","CONDITIONAL_DIRECTIVE","LOOP_DIRECTIVE","LOOP_NO_REORDER_DIRECTIVE","SHOW_DIRECTIVE","HIDE_DIRECTIVE","KEY_DIRECTIVE","RIOT_EVENTS_KEY","T_STRING","T_OBJECT","T_UNDEF","T_FUNCTION","XLINK_NS","SVG_NS","XLINK_REGEX","WIN","window","undefined","RE_SPECIAL_TAGS","RE_SPECIAL_TAGS_NO_OPTION","RE_EVENTS_PREFIX","RE_HTML_ATTRS","CASE_SENSITIVE_ATTRIBUTES","RE_BOOL_ATTRS","IE_VERSION","documentMode","makeElement","name","createElementNS","createElement","setAttribute","dom","val","xlink","exec","setAttributeNS","styleNode","cssTextProp","byName","needsInject","newNode","userNode","id","parentNode","replaceChild","head","appendChild","styleSheet","styleManager","add","css","inject","style","Object","keys","map","k","join","cssText","innerHTML","remove","skipRegex","beforeReChars","beforeReWords","wordsLastChar","reduce","s","w","slice","RE_REGEX","RE_VN_CHAR","prev","code","pos","test","_skipRegex","start","re","lastIndex","match","next","length","c","indexOf","end","brackets","UNDEF","REGLOB","R_MLCOMMS","R_STRINGS","S_QBLOCKS","source","UNSUPPORTED","RegExp","NEED_ESCAPE","S_QBLOCK2","FINDBRACES","DEFAULT","_pairs","cachedBrackets","_regex","_cache","_settings","_loopback","_rewrite","bp","replace","_create","pair","arr","split","Error","concat","_brackets","reOrIdx","str","tmpl","_bp","parts","isexpr","qblocks","prevStr","mark","index","ch","rech","ix","pushQBlock","unescapeStr","push","_pos","_lastIndex","slash","hasExpr","loopKeys","expr","m","key","trim","array","_reset","_setSettings","o","b","defineProperty","set","get","enumerable","settings","_tmpl","data","call","_logErr","bind","clearCache","errorHandler","err","riotData","tagName","__","_riot_id","console","error","message","log","_getTmpl","Function","RE_DQUOTE","RE_QBMARK","qstr","i","j","list","_parseExpr","_","RE_CSNAME","RE_BREND","asText","cnt","jsb","rightContext","skipBraces","_wrapExpr","mm","lv","ir","JS_CONTEXT","JS_VARNAME","JS_NOPROPS","tb","p","mvar","version","observable","el","callbacks","Array","prototype","defineProperties","on","value","event","fn","writable","configurable","off","cb","splice","one","apply","arguments","trigger","arguments$1","arglen","args","fns","getPropDescriptor","getOwnPropertyDescriptor","isUndefined","isWritable","obj","descriptor","extend","src","l","create","skipAnonymousTags","keepValueAttributes","autoUpdate","$$","querySelectorAll","createDOMPlaceholder","createTextNode","toggleVisibility","show","display","hidden","getAttribute","removeAttribute","setInnerHTML","container","html","isSvg","node","ownerDocument","importNode","DOMParser","parseFromString","documentElement","walkAttributes","toLowerCase","createFragment","createDocumentFragment","safeInsert","root","curr","insertBefore","styleObjectToString","acc","prop","walkNodes","context","res","firstChild","nextSibling","freeze","mkEl","setAttr","getAttr","remAttr","walkAttrs","createFrag","isNil","isBlank","isFunction","isObject","owner","ownerSVGElement","isArray","isBoolAttr","isString","check","contains","item","each","len","startsWith","uid","options","toCamel","toUpperCase","warn","misc","objectCreate","arrayishAdd","ensureArray","dest","isArr","hasIndex","oldIndex","getName","skipDataIs","child","namedTag","inheritParentProps","parent","reHasYield","reYieldAll","reYieldSrc","reYieldDest","rootEls","tr","th","td","col","tblTags","GENERIC","SVG","specialTags","select","selectedIndex","tname","childElementCount","replaceYield","ref","text","def","mkdom","EVENT_ATTR_RE","isEventAttribute","attribute","getImmediateCustomParent","tag","ptag","isAnonymous","handleEvent","handler","e","currentTarget","target","srcElement","which","charCode","keyCode","preventUpdate","isMounted","update","setEventHandler","eventName","listeners","removeEventListener","addEventListener","initChild","opts","createTag","tags","arrayishRemove","makeVirtual","this$1","tail","frag","sib","virts","makeReplaceVirtual","updateDataIs","_tag","ref$1","isVirtual","unmount","impl","attrs","a","mount","onUnmount","delName","dataIs","normalizeAttrName","attrName","updateExpression","attr","isToggle","isStyleAttr","isClassAttr","isValueAttr","wasCreated","hasValue","isObj","JSON","stringify","wasParsedOnce","bool","isRtag","nodeValue","expressions","updateOpts","isLoop","instAttrs","componentUpdate","nextOpts","canTrigger","skipAnonymous","shouldUpdate","query","filter","t","Tag","onCreate","class","constructor","mount$1","tag2","elem","allTags","pushTagsTo","riotTag","nodeList","_el","mixins","globals","mixins_id","mixin","mix","g","store","update$1","unregister","core","componentMixin","tag$$1","instance","props","propsBlacklist","proto","getPrototypeOf","getOwnPropertyNames","hasGetterSetter","hasOwnProperty","init","moveChild","newPos","moveVirtual","mkitem","unmountRedundant","items","filteredItemsCount","moveNestedTags","move","nextTag","insert","append","getItemId","keyAttr","originalItem","keyedItem","hasKeyAttrExpr","_each","mustReorder","placeholder","ifExpr","oldItems","removeChild","updateEach","tmpItems","hasKeys","_item","itemId","doReorder","oldPos","isNew","mustAppend","mustCreate","cloneNode","RefExpr","attrValue","rawValue","hasExp","old","customParent","tagOrDom","__ref","refs","createRefDirective","unmountAll","IfExpr","stub","pristine","update$$1","current","parseExpressions","createIfDirective","mustIncludeRoot","type","nodeType","tagImpl","attributes","parentElement","outerHTML","hasIsDirective","parseAttributes","setMountState","componentMount","isPrototypeOf","v","implAttrs","globalMixin","isInline","tagUnmount","mustKeepRoot","tagIndex","forEach","conf","implClass","_innerHTML","getTagName","mountTo","selectTags","getTag","initChildTag","moveChildTag","getImmediateCustomParentTag","settings$1","util","vdom","Tag$1","tag$1","tag2$1","mount$2","mixin$1","update$2","unregister$1","version$1","observable$1","riot$1","default","tagger","require","finishAnimation","tl","anime","timeline","duration","targets","button","opacity","animationUnmount","classList","content","feature","touch","preventDefault","headerHeight","$target","href","targetOffset","offset","top","animate","scrollTop","jQuery","animeSample","translateX","rotate","direction","easing","loop"],"mappings":"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","file":"main.map","sourceRoot":"../../src/js","sourcesContent":["/* Riot v3.13.2, @license MIT */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  (factory((global.riot = {})));\n}(this, (function (exports) { 'use strict';\n\n  /**\n   * Shorter and fast way to select a single node in the DOM\n   * @param   { String } selector - unique dom selector\n   * @param   { Object } ctx - DOM node where the target of our search will is located\n   * @returns { Object } dom node found\n   */\n  function $(selector, ctx) {\n    return (ctx || document).querySelector(selector)\n  }\n\n  var\n    // be aware, internal usage\n    // ATTENTION: prefix the global dynamic variables with `__`\n    // tags instances cache\n    __TAGS_CACHE = [],\n    // tags implementation cache\n    __TAG_IMPL = {},\n    YIELD_TAG = 'yield',\n\n    /**\n     * Const\n     */\n    GLOBAL_MIXIN = '__global_mixin',\n\n    // riot specific prefixes or attributes\n    ATTRS_PREFIX = 'riot-',\n\n    // Riot Directives\n    REF_DIRECTIVES = ['ref', 'data-ref'],\n    IS_DIRECTIVE = 'data-is',\n    CONDITIONAL_DIRECTIVE = 'if',\n    LOOP_DIRECTIVE = 'each',\n    LOOP_NO_REORDER_DIRECTIVE = 'no-reorder',\n    SHOW_DIRECTIVE = 'show',\n    HIDE_DIRECTIVE = 'hide',\n    KEY_DIRECTIVE = 'key',\n    RIOT_EVENTS_KEY = '__riot-events__',\n\n    // for typeof == '' comparisons\n    T_STRING = 'string',\n    T_OBJECT = 'object',\n    T_UNDEF  = 'undefined',\n    T_FUNCTION = 'function',\n\n    XLINK_NS = 'http://www.w3.org/1999/xlink',\n    SVG_NS = 'http://www.w3.org/2000/svg',\n    XLINK_REGEX = /^xlink:(\\w+)/,\n\n    WIN = typeof window === T_UNDEF ? /* istanbul ignore next */ undefined : window,\n\n    // special native tags that cannot be treated like the others\n    RE_SPECIAL_TAGS = /^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?|opt(?:ion|group))$/,\n    RE_SPECIAL_TAGS_NO_OPTION = /^(?:t(?:body|head|foot|[rhd])|caption|col(?:group)?)$/,\n    RE_EVENTS_PREFIX = /^on/,\n    RE_HTML_ATTRS = /([-\\w]+) ?= ?(?:\"([^\"]*)|'([^']*)|({[^}]*}))/g,\n    // some DOM attributes must be normalized\n    CASE_SENSITIVE_ATTRIBUTES = {\n      'viewbox': 'viewBox',\n      'preserveaspectratio': 'preserveAspectRatio'\n    },\n    /**\n     * Matches boolean HTML attributes in the riot tag definition.\n     * With a long list like this, a regex is faster than `[].indexOf` in most browsers.\n     * @const {RegExp}\n     * @see [attributes.md](https://github.com/riot/compiler/blob/dev/doc/attributes.md)\n     */\n    RE_BOOL_ATTRS = /^(?:disabled|checked|readonly|required|allowfullscreen|auto(?:focus|play)|compact|controls|default|formnovalidate|hidden|ismap|itemscope|loop|multiple|muted|no(?:resize|shade|validate|wrap)?|open|reversed|seamless|selected|sortable|truespeed|typemustmatch)$/,\n    // version# for IE 8-11, 0 for others\n    IE_VERSION = (WIN && WIN.document || /* istanbul ignore next */ {}).documentMode | 0;\n\n  /**\n   * Create a generic DOM node\n   * @param   { String } name - name of the DOM node we want to create\n   * @returns { Object } DOM node just created\n   */\n  function makeElement(name) {\n    return name === 'svg' ? document.createElementNS(SVG_NS, name) : document.createElement(name)\n  }\n\n  /**\n   * Set any DOM attribute\n   * @param { Object } dom - DOM node we want to update\n   * @param { String } name - name of the property we want to set\n   * @param { String } val - value of the property we want to set\n   */\n  function setAttribute(dom, name, val) {\n    var xlink = XLINK_REGEX.exec(name);\n    if (xlink && xlink[1])\n      { dom.setAttributeNS(XLINK_NS, xlink[1], val); }\n    else\n      { dom.setAttribute(name, val); }\n  }\n\n  var styleNode;\n  // Create cache and shortcut to the correct property\n  var cssTextProp;\n  var byName = {};\n  var needsInject = false;\n\n  // skip the following code on the server\n  if (WIN) {\n    styleNode = ((function () {\n      // create a new style element with the correct type\n      var newNode = makeElement('style');\n      // replace any user node or insert the new one into the head\n      var userNode = $('style[type=riot]');\n\n      setAttribute(newNode, 'type', 'text/css');\n      /* istanbul ignore next */\n      if (userNode) {\n        if (userNode.id) { newNode.id = userNode.id; }\n        userNode.parentNode.replaceChild(newNode, userNode);\n      } else { document.head.appendChild(newNode); }\n\n      return newNode\n    }))();\n    cssTextProp = styleNode.styleSheet;\n  }\n\n  /**\n   * Object that will be used to inject and manage the css of every tag instance\n   */\n  var styleManager = {\n    styleNode: styleNode,\n    /**\n     * Save a tag style to be later injected into DOM\n     * @param { String } css - css string\n     * @param { String } name - if it's passed we will map the css to a tagname\n     */\n    add: function add(css, name) {\n      byName[name] = css;\n      needsInject = true;\n    },\n    /**\n     * Inject all previously saved tag styles into DOM\n     * innerHTML seems slow: http://jsperf.com/riot-insert-style\n     */\n    inject: function inject() {\n      if (!WIN || !needsInject) { return }\n      needsInject = false;\n      var style = Object.keys(byName)\n        .map(function (k) { return byName[k]; })\n        .join('\\n');\n      /* istanbul ignore next */\n      if (cssTextProp) { cssTextProp.cssText = style; }\n      else { styleNode.innerHTML = style; }\n    },\n\n    /**\n     * Remove a tag style of injected DOM later.\n     * @param {String} name a registered tagname\n     */\n    remove: function remove(name) {\n      delete byName[name];\n      needsInject = true;\n    }\n  };\n\n  /**\n   * The riot template engine\n   * @version v3.0.8\n   */\n\n  /* istanbul ignore next */\n  var skipRegex = (function () { //eslint-disable-line no-unused-vars\n\n    var beforeReChars = '[{(,;:?=|&!^~>%*/';\n\n    var beforeReWords = [\n      'case',\n      'default',\n      'do',\n      'else',\n      'in',\n      'instanceof',\n      'prefix',\n      'return',\n      'typeof',\n      'void',\n      'yield'\n    ];\n\n    var wordsLastChar = beforeReWords.reduce(function (s, w) {\n      return s + w.slice(-1)\n    }, '');\n\n    var RE_REGEX = /^\\/(?=[^*>/])[^[/\\\\]*(?:(?:\\\\.|\\[(?:\\\\.|[^\\]\\\\]*)*\\])[^[\\\\/]*)*?\\/[gimuy]*/;\n    var RE_VN_CHAR = /[$\\w]/;\n\n    function prev (code, pos) {\n      while (--pos >= 0 && /\\s/.test(code[pos])){ }\n      return pos\n    }\n\n    function _skipRegex (code, start) {\n\n      var re = /.*/g;\n      var pos = re.lastIndex = start++;\n      var match = re.exec(code)[0].match(RE_REGEX);\n\n      if (match) {\n        var next = pos + match[0].length;\n\n        pos = prev(code, pos);\n        var c = code[pos];\n\n        if (pos < 0 || ~beforeReChars.indexOf(c)) {\n          return next\n        }\n\n        if (c === '.') {\n\n          if (code[pos - 1] === '.') {\n            start = next;\n          }\n\n        } else if (c === '+' || c === '-') {\n\n          if (code[--pos] !== c ||\n              (pos = prev(code, pos)) < 0 ||\n              !RE_VN_CHAR.test(code[pos])) {\n            start = next;\n          }\n\n        } else if (~wordsLastChar.indexOf(c)) {\n\n          var end = pos + 1;\n\n          while (--pos >= 0 && RE_VN_CHAR.test(code[pos])){ }\n          if (~beforeReWords.indexOf(code.slice(pos + 1, end))) {\n            start = next;\n          }\n        }\n      }\n\n      return start\n    }\n\n    return _skipRegex\n\n  })();\n\n  /**\n   * riot.util.brackets\n   *\n   * - `brackets    ` - Returns a string or regex based on its parameter\n   * - `brackets.set` - Change the current riot brackets\n   *\n   * @module\n   */\n\n  /* global riot */\n\n  /* istanbul ignore next */\n  var brackets = (function (UNDEF) {\n\n    var\n      REGLOB = 'g',\n\n      R_MLCOMMS = /\\/\\*[^*]*\\*+(?:[^*\\/][^*]*\\*+)*\\//g,\n\n      R_STRINGS = /\"[^\"\\\\]*(?:\\\\[\\S\\s][^\"\\\\]*)*\"|'[^'\\\\]*(?:\\\\[\\S\\s][^'\\\\]*)*'|`[^`\\\\]*(?:\\\\[\\S\\s][^`\\\\]*)*`/g,\n\n      S_QBLOCKS = R_STRINGS.source + '|' +\n        /(?:\\breturn\\s+|(?:[$\\w\\)\\]]|\\+\\+|--)\\s*(\\/)(?![*\\/]))/.source + '|' +\n        /\\/(?=[^*\\/])[^[\\/\\\\]*(?:(?:\\[(?:\\\\.|[^\\]\\\\]*)*\\]|\\\\.)[^[\\/\\\\]*)*?([^<]\\/)[gim]*/.source,\n\n      UNSUPPORTED = RegExp('[\\\\' + 'x00-\\\\x1F<>a-zA-Z0-9\\'\",;\\\\\\\\]'),\n\n      NEED_ESCAPE = /(?=[[\\]()*+?.^$|])/g,\n\n      S_QBLOCK2 = R_STRINGS.source + '|' + /(\\/)(?![*\\/])/.source,\n\n      FINDBRACES = {\n        '(': RegExp('([()])|'   + S_QBLOCK2, REGLOB),\n        '[': RegExp('([[\\\\]])|' + S_QBLOCK2, REGLOB),\n        '{': RegExp('([{}])|'   + S_QBLOCK2, REGLOB)\n      },\n\n      DEFAULT = '{ }';\n\n    var _pairs = [\n      '{', '}',\n      '{', '}',\n      /{[^}]*}/,\n      /\\\\([{}])/g,\n      /\\\\({)|{/g,\n      RegExp('\\\\\\\\(})|([[({])|(})|' + S_QBLOCK2, REGLOB),\n      DEFAULT,\n      /^\\s*{\\^?\\s*([$\\w]+)(?:\\s*,\\s*(\\S+))?\\s+in\\s+(\\S.*)\\s*}/,\n      /(^|[^\\\\]){=[\\S\\s]*?}/\n    ];\n\n    var\n      cachedBrackets = UNDEF,\n      _regex,\n      _cache = [],\n      _settings;\n\n    function _loopback (re) { return re }\n\n    function _rewrite (re, bp) {\n      if (!bp) { bp = _cache; }\n      return new RegExp(\n        re.source.replace(/{/g, bp[2]).replace(/}/g, bp[3]), re.global ? REGLOB : ''\n      )\n    }\n\n    function _create (pair) {\n      if (pair === DEFAULT) { return _pairs }\n\n      var arr = pair.split(' ');\n\n      if (arr.length !== 2 || UNSUPPORTED.test(pair)) {\n        throw new Error('Unsupported brackets \"' + pair + '\"')\n      }\n      arr = arr.concat(pair.replace(NEED_ESCAPE, '\\\\').split(' '));\n\n      arr[4] = _rewrite(arr[1].length > 1 ? /{[\\S\\s]*?}/ : _pairs[4], arr);\n      arr[5] = _rewrite(pair.length > 3 ? /\\\\({|})/g : _pairs[5], arr);\n      arr[6] = _rewrite(_pairs[6], arr);\n      arr[7] = RegExp('\\\\\\\\(' + arr[3] + ')|([[({])|(' + arr[3] + ')|' + S_QBLOCK2, REGLOB);\n      arr[8] = pair;\n      return arr\n    }\n\n    function _brackets (reOrIdx) {\n      return reOrIdx instanceof RegExp ? _regex(reOrIdx) : _cache[reOrIdx]\n    }\n\n    _brackets.split = function split (str, tmpl, _bp) {\n      // istanbul ignore next: _bp is for the compiler\n      if (!_bp) { _bp = _cache; }\n\n      var\n        parts = [],\n        match,\n        isexpr,\n        start,\n        pos,\n        re = _bp[6];\n\n      var qblocks = [];\n      var prevStr = '';\n      var mark, lastIndex;\n\n      isexpr = start = re.lastIndex = 0;\n\n      while ((match = re.exec(str))) {\n\n        lastIndex = re.lastIndex;\n        pos = match.index;\n\n        if (isexpr) {\n\n          if (match[2]) {\n\n            var ch = match[2];\n            var rech = FINDBRACES[ch];\n            var ix = 1;\n\n            rech.lastIndex = lastIndex;\n            while ((match = rech.exec(str))) {\n              if (match[1]) {\n                if (match[1] === ch) { ++ix; }\n                else if (!--ix) { break }\n              } else {\n                rech.lastIndex = pushQBlock(match.index, rech.lastIndex, match[2]);\n              }\n            }\n            re.lastIndex = ix ? str.length : rech.lastIndex;\n            continue\n          }\n\n          if (!match[3]) {\n            re.lastIndex = pushQBlock(pos, lastIndex, match[4]);\n            continue\n          }\n        }\n\n        if (!match[1]) {\n          unescapeStr(str.slice(start, pos));\n          start = re.lastIndex;\n          re = _bp[6 + (isexpr ^= 1)];\n          re.lastIndex = start;\n        }\n      }\n\n      if (str && start < str.length) {\n        unescapeStr(str.slice(start));\n      }\n\n      parts.qblocks = qblocks;\n\n      return parts\n\n      function unescapeStr (s) {\n        if (prevStr) {\n          s = prevStr + s;\n          prevStr = '';\n        }\n        if (tmpl || isexpr) {\n          parts.push(s && s.replace(_bp[5], '$1'));\n        } else {\n          parts.push(s);\n        }\n      }\n\n      function pushQBlock(_pos, _lastIndex, slash) { //eslint-disable-line\n        if (slash) {\n          _lastIndex = skipRegex(str, _pos);\n        }\n\n        if (tmpl && _lastIndex > _pos + 2) {\n          mark = '\\u2057' + qblocks.length + '~';\n          qblocks.push(str.slice(_pos, _lastIndex));\n          prevStr += str.slice(start, _pos) + mark;\n          start = _lastIndex;\n        }\n        return _lastIndex\n      }\n    };\n\n    _brackets.hasExpr = function hasExpr (str) {\n      return _cache[4].test(str)\n    };\n\n    _brackets.loopKeys = function loopKeys (expr) {\n      var m = expr.match(_cache[9]);\n\n      return m\n        ? { key: m[1], pos: m[2], val: _cache[0] + m[3].trim() + _cache[1] }\n        : { val: expr.trim() }\n    };\n\n    _brackets.array = function array (pair) {\n      return pair ? _create(pair) : _cache\n    };\n\n    function _reset (pair) {\n      if ((pair || (pair = DEFAULT)) !== _cache[8]) {\n        _cache = _create(pair);\n        _regex = pair === DEFAULT ? _loopback : _rewrite;\n        _cache[9] = _regex(_pairs[9]);\n      }\n      cachedBrackets = pair;\n    }\n\n    function _setSettings (o) {\n      var b;\n\n      o = o || {};\n      b = o.brackets;\n      Object.defineProperty(o, 'brackets', {\n        set: _reset,\n        get: function () { return cachedBrackets },\n        enumerable: true\n      });\n      _settings = o;\n      _reset(b);\n    }\n\n    Object.defineProperty(_brackets, 'settings', {\n      set: _setSettings,\n      get: function () { return _settings }\n    });\n\n    /* istanbul ignore next: in the browser riot is always in the scope */\n    _brackets.settings = typeof riot !== 'undefined' && riot.settings || {};\n    _brackets.set = _reset;\n    _brackets.skipRegex = skipRegex;\n\n    _brackets.R_STRINGS = R_STRINGS;\n    _brackets.R_MLCOMMS = R_MLCOMMS;\n    _brackets.S_QBLOCKS = S_QBLOCKS;\n    _brackets.S_QBLOCK2 = S_QBLOCK2;\n\n    return _brackets\n\n  })();\n\n  /**\n   * @module tmpl\n   *\n   * tmpl          - Root function, returns the template value, render with data\n   * tmpl.hasExpr  - Test the existence of a expression inside a string\n   * tmpl.loopKeys - Get the keys for an 'each' loop (used by `_each`)\n   */\n\n  /* istanbul ignore next */\n  var tmpl = (function () {\n\n    var _cache = {};\n\n    function _tmpl (str, data) {\n      if (!str) { return str }\n\n      return (_cache[str] || (_cache[str] = _create(str))).call(\n        data, _logErr.bind({\n          data: data,\n          tmpl: str\n        })\n      )\n    }\n\n    _tmpl.hasExpr = brackets.hasExpr;\n\n    _tmpl.loopKeys = brackets.loopKeys;\n\n    // istanbul ignore next\n    _tmpl.clearCache = function () { _cache = {}; };\n\n    _tmpl.errorHandler = null;\n\n    function _logErr (err, ctx) {\n\n      err.riotData = {\n        tagName: ctx && ctx.__ && ctx.__.tagName,\n        _riot_id: ctx && ctx._riot_id  //eslint-disable-line camelcase\n      };\n\n      if (_tmpl.errorHandler) { _tmpl.errorHandler(err); }\n      else if (\n        typeof console !== 'undefined' &&\n        typeof console.error === 'function'\n      ) {\n        console.error(err.message);\n        console.log('<%s> %s', err.riotData.tagName || 'Unknown tag', this.tmpl); // eslint-disable-line\n        console.log(this.data); // eslint-disable-line\n      }\n    }\n\n    function _create (str) {\n      var expr = _getTmpl(str);\n\n      if (expr.slice(0, 11) !== 'try{return ') { expr = 'return ' + expr; }\n\n      return new Function('E', expr + ';')    // eslint-disable-line no-new-func\n    }\n\n    var RE_DQUOTE = /\\u2057/g;\n    var RE_QBMARK = /\\u2057(\\d+)~/g;\n\n    function _getTmpl (str) {\n      var parts = brackets.split(str.replace(RE_DQUOTE, '\"'), 1);\n      var qstr = parts.qblocks;\n      var expr;\n\n      if (parts.length > 2 || parts[0]) {\n        var i, j, list = [];\n\n        for (i = j = 0; i < parts.length; ++i) {\n\n          expr = parts[i];\n\n          if (expr && (expr = i & 1\n\n              ? _parseExpr(expr, 1, qstr)\n\n              : '\"' + expr\n                  .replace(/\\\\/g, '\\\\\\\\')\n                  .replace(/\\r\\n?|\\n/g, '\\\\n')\n                  .replace(/\"/g, '\\\\\"') +\n                '\"'\n\n            )) { list[j++] = expr; }\n\n        }\n\n        expr = j < 2 ? list[0]\n             : '[' + list.join(',') + '].join(\"\")';\n\n      } else {\n\n        expr = _parseExpr(parts[1], 0, qstr);\n      }\n\n      if (qstr.length) {\n        expr = expr.replace(RE_QBMARK, function (_, pos) {\n          return qstr[pos]\n            .replace(/\\r/g, '\\\\r')\n            .replace(/\\n/g, '\\\\n')\n        });\n      }\n      return expr\n    }\n\n    var RE_CSNAME = /^(?:(-?[_A-Za-z\\xA0-\\xFF][-\\w\\xA0-\\xFF]*)|\\u2057(\\d+)~):/;\n    var\n      RE_BREND = {\n        '(': /[()]/g,\n        '[': /[[\\]]/g,\n        '{': /[{}]/g\n      };\n\n    function _parseExpr (expr, asText, qstr) {\n\n      expr = expr\n        .replace(/\\s+/g, ' ').trim()\n        .replace(/\\ ?([[\\({},?\\.:])\\ ?/g, '$1');\n\n      if (expr) {\n        var\n          list = [],\n          cnt = 0,\n          match;\n\n        while (expr &&\n              (match = expr.match(RE_CSNAME)) &&\n              !match.index\n          ) {\n          var\n            key,\n            jsb,\n            re = /,|([[{(])|$/g;\n\n          expr = RegExp.rightContext;\n          key  = match[2] ? qstr[match[2]].slice(1, -1).trim().replace(/\\s+/g, ' ') : match[1];\n\n          while (jsb = (match = re.exec(expr))[1]) { skipBraces(jsb, re); }\n\n          jsb  = expr.slice(0, match.index);\n          expr = RegExp.rightContext;\n\n          list[cnt++] = _wrapExpr(jsb, 1, key);\n        }\n\n        expr = !cnt ? _wrapExpr(expr, asText)\n             : cnt > 1 ? '[' + list.join(',') + '].join(\" \").trim()' : list[0];\n      }\n      return expr\n\n      function skipBraces (ch, re) {\n        var\n          mm,\n          lv = 1,\n          ir = RE_BREND[ch];\n\n        ir.lastIndex = re.lastIndex;\n        while (mm = ir.exec(expr)) {\n          if (mm[0] === ch) { ++lv; }\n          else if (!--lv) { break }\n        }\n        re.lastIndex = lv ? expr.length : ir.lastIndex;\n      }\n    }\n\n    // istanbul ignore next: not both\n    var // eslint-disable-next-line max-len\n      JS_CONTEXT = '\"in this?this:' + (typeof window !== 'object' ? 'global' : 'window') + ').',\n      JS_VARNAME = /[,{][\\$\\w]+(?=:)|(^ *|[^$\\w\\.{])(?!(?:typeof|true|false|null|undefined|in|instanceof|is(?:Finite|NaN)|void|NaN|new|Date|RegExp|Math)(?![$\\w]))([$_A-Za-z][$\\w]*)/g,\n      JS_NOPROPS = /^(?=(\\.[$\\w]+))\\1(?:[^.[(]|$)/;\n\n    function _wrapExpr (expr, asText, key) {\n      var tb;\n\n      expr = expr.replace(JS_VARNAME, function (match, p, mvar, pos, s) {\n        if (mvar) {\n          pos = tb ? 0 : pos + match.length;\n\n          if (mvar !== 'this' && mvar !== 'global' && mvar !== 'window') {\n            match = p + '(\"' + mvar + JS_CONTEXT + mvar;\n            if (pos) { tb = (s = s[pos]) === '.' || s === '(' || s === '['; }\n          } else if (pos) {\n            tb = !JS_NOPROPS.test(s.slice(pos));\n          }\n        }\n        return match\n      });\n\n      if (tb) {\n        expr = 'try{return ' + expr + '}catch(e){E(e,this)}';\n      }\n\n      if (key) {\n\n        expr = (tb\n            ? 'function(){' + expr + '}.call(this)' : '(' + expr + ')'\n          ) + '?\"' + key + '\":\"\"';\n\n      } else if (asText) {\n\n        expr = 'function(v){' + (tb\n            ? expr.replace('return ', 'v=') : 'v=(' + expr + ')'\n          ) + ';return v||v===0?v:\"\"}.call(this)';\n      }\n\n      return expr\n    }\n\n    _tmpl.version = brackets.version = 'v3.0.8';\n\n    return _tmpl\n\n  })();\n\n  /* istanbul ignore next */\n  var observable = function(el) {\n\n    /**\n     * Extend the original object or create a new empty one\n     * @type { Object }\n     */\n\n    el = el || {};\n\n    /**\n     * Private variables\n     */\n    var callbacks = {},\n      slice = Array.prototype.slice;\n\n    /**\n     * Public Api\n     */\n\n    // extend the el object adding the observable methods\n    Object.defineProperties(el, {\n      /**\n       * Listen to the given `event` ands\n       * execute the `callback` each time an event is triggered.\n       * @param  { String } event - event id\n       * @param  { Function } fn - callback function\n       * @returns { Object } el\n       */\n      on: {\n        value: function(event, fn) {\n          if (typeof fn == 'function')\n            { (callbacks[event] = callbacks[event] || []).push(fn); }\n          return el\n        },\n        enumerable: false,\n        writable: false,\n        configurable: false\n      },\n\n      /**\n       * Removes the given `event` listeners\n       * @param   { String } event - event id\n       * @param   { Function } fn - callback function\n       * @returns { Object } el\n       */\n      off: {\n        value: function(event, fn) {\n          if (event == '*' && !fn) { callbacks = {}; }\n          else {\n            if (fn) {\n              var arr = callbacks[event];\n              for (var i = 0, cb; cb = arr && arr[i]; ++i) {\n                if (cb == fn) { arr.splice(i--, 1); }\n              }\n            } else { delete callbacks[event]; }\n          }\n          return el\n        },\n        enumerable: false,\n        writable: false,\n        configurable: false\n      },\n\n      /**\n       * Listen to the given `event` and\n       * execute the `callback` at most once\n       * @param   { String } event - event id\n       * @param   { Function } fn - callback function\n       * @returns { Object } el\n       */\n      one: {\n        value: function(event, fn) {\n          function on() {\n            el.off(event, on);\n            fn.apply(el, arguments);\n          }\n          return el.on(event, on)\n        },\n        enumerable: false,\n        writable: false,\n        configurable: false\n      },\n\n      /**\n       * Execute all callback functions that listen to\n       * the given `event`\n       * @param   { String } event - event id\n       * @returns { Object } el\n       */\n      trigger: {\n        value: function(event) {\n          var arguments$1 = arguments;\n\n\n          // getting the arguments\n          var arglen = arguments.length - 1,\n            args = new Array(arglen),\n            fns,\n            fn,\n            i;\n\n          for (i = 0; i < arglen; i++) {\n            args[i] = arguments$1[i + 1]; // skip first argument\n          }\n\n          fns = slice.call(callbacks[event] || [], 0);\n\n          for (i = 0; fn = fns[i]; ++i) {\n            fn.apply(el, args);\n          }\n\n          if (callbacks['*'] && event != '*')\n            { el.trigger.apply(el, ['*', event].concat(args)); }\n\n          return el\n        },\n        enumerable: false,\n        writable: false,\n        configurable: false\n      }\n    });\n\n    return el\n\n  };\n\n  /**\n   * Short alias for Object.getOwnPropertyDescriptor\n   */\n  function getPropDescriptor (o, k) {\n    return Object.getOwnPropertyDescriptor(o, k)\n  }\n\n  /**\n   * Check if passed argument is undefined\n   * @param   { * } value -\n   * @returns { Boolean } -\n   */\n  function isUndefined(value) {\n    return typeof value === T_UNDEF\n  }\n\n  /**\n   * Check whether object's property could be overridden\n   * @param   { Object }  obj - source object\n   * @param   { String }  key - object property\n   * @returns { Boolean } true if writable\n   */\n  function isWritable(obj, key) {\n    var descriptor = getPropDescriptor(obj, key);\n    return isUndefined(obj[key]) || descriptor && descriptor.writable\n  }\n\n  /**\n   * Extend any object with other properties\n   * @param   { Object } src - source object\n   * @returns { Object } the resulting extended object\n   *\n   * var obj = { foo: 'baz' }\n   * extend(obj, {bar: 'bar', foo: 'bar'})\n   * console.log(obj) => {bar: 'bar', foo: 'bar'}\n   *\n   */\n  function extend(src) {\n    var obj;\n    var i = 1;\n    var args = arguments;\n    var l = args.length;\n\n    for (; i < l; i++) {\n      if (obj = args[i]) {\n        for (var key in obj) {\n          // check if this property of the source object could be overridden\n          if (isWritable(src, key))\n            { src[key] = obj[key]; }\n        }\n      }\n    }\n    return src\n  }\n\n  /**\n   * Alias for Object.create\n   */\n  function create(src) {\n    return Object.create(src)\n  }\n\n  var settings = extend(create(brackets.settings), {\n    skipAnonymousTags: true,\n    // the \"value\" attributes will be preserved\n    keepValueAttributes: false,\n    // handle the auto updates on any DOM event\n    autoUpdate: true\n  });\n\n  /**\n   * Shorter and fast way to select multiple nodes in the DOM\n   * @param   { String } selector - DOM selector\n   * @param   { Object } ctx - DOM node where the targets of our search will is located\n   * @returns { Object } dom nodes found\n   */\n  function $$(selector, ctx) {\n    return [].slice.call((ctx || document).querySelectorAll(selector))\n  }\n\n  /**\n   * Create a document text node\n   * @returns { Object } create a text node to use as placeholder\n   */\n  function createDOMPlaceholder() {\n    return document.createTextNode('')\n  }\n\n  /**\n   * Toggle the visibility of any DOM node\n   * @param   { Object }  dom - DOM node we want to hide\n   * @param   { Boolean } show - do we want to show it?\n   */\n\n  function toggleVisibility(dom, show) {\n    dom.style.display = show ? '' : 'none';\n    dom.hidden = show ? false : true;\n  }\n\n  /**\n   * Get the value of any DOM attribute on a node\n   * @param   { Object } dom - DOM node we want to parse\n   * @param   { String } name - name of the attribute we want to get\n   * @returns { String | undefined } name of the node attribute whether it exists\n   */\n  function getAttribute(dom, name) {\n    return dom.getAttribute(name)\n  }\n\n  /**\n   * Remove any DOM attribute from a node\n   * @param   { Object } dom - DOM node we want to update\n   * @param   { String } name - name of the property we want to remove\n   */\n  function removeAttribute(dom, name) {\n    dom.removeAttribute(name);\n  }\n\n  /**\n   * Set the inner html of any DOM node SVGs included\n   * @param { Object } container - DOM node where we'll inject new html\n   * @param { String } html - html to inject\n   * @param { Boolean } isSvg - svg tags should be treated a bit differently\n   */\n  /* istanbul ignore next */\n  function setInnerHTML(container, html, isSvg) {\n    // innerHTML is not supported on svg tags so we neet to treat them differently\n    if (isSvg) {\n      var node = container.ownerDocument.importNode(\n        new DOMParser()\n          .parseFromString((\"<svg xmlns=\\\"\" + SVG_NS + \"\\\">\" + html + \"</svg>\"), 'application/xml')\n          .documentElement,\n        true\n      );\n\n      container.appendChild(node);\n    } else {\n      container.innerHTML = html;\n    }\n  }\n\n  /**\n   * Minimize risk: only zero or one _space_ between attr & value\n   * @param   { String }   html - html string we want to parse\n   * @param   { Function } fn - callback function to apply on any attribute found\n   */\n  function walkAttributes(html, fn) {\n    if (!html) { return }\n    var m;\n    while (m = RE_HTML_ATTRS.exec(html))\n      { fn(m[1].toLowerCase(), m[2] || m[3] || m[4]); }\n  }\n\n  /**\n   * Create a document fragment\n   * @returns { Object } document fragment\n   */\n  function createFragment() {\n    return document.createDocumentFragment()\n  }\n\n  /**\n   * Insert safely a tag to fix #1962 #1649\n   * @param   { HTMLElement } root - children container\n   * @param   { HTMLElement } curr - node to insert\n   * @param   { HTMLElement } next - node that should preceed the current node inserted\n   */\n  function safeInsert(root, curr, next) {\n    root.insertBefore(curr, next.parentNode && next);\n  }\n\n  /**\n   * Convert a style object to a string\n   * @param   { Object } style - style object we need to parse\n   * @returns { String } resulting css string\n   * @example\n   * styleObjectToString({ color: 'red', height: '10px'}) // => 'color: red; height: 10px'\n   */\n  function styleObjectToString(style) {\n    return Object.keys(style).reduce(function (acc, prop) {\n      return (acc + \" \" + prop + \": \" + (style[prop]) + \";\")\n    }, '')\n  }\n\n  /**\n   * Walk down recursively all the children tags starting dom node\n   * @param   { Object }   dom - starting node where we will start the recursion\n   * @param   { Function } fn - callback to transform the child node just found\n   * @param   { Object }   context - fn can optionally return an object, which is passed to children\n   */\n  function walkNodes(dom, fn, context) {\n    if (dom) {\n      var res = fn(dom, context);\n      var next;\n      // stop the recursion\n      if (res === false) { return }\n\n      dom = dom.firstChild;\n\n      while (dom) {\n        next = dom.nextSibling;\n        walkNodes(dom, fn, res);\n        dom = next;\n      }\n    }\n  }\n\n\n\n  var dom = /*#__PURE__*/Object.freeze({\n    $$: $$,\n    $: $,\n    createDOMPlaceholder: createDOMPlaceholder,\n    mkEl: makeElement,\n    setAttr: setAttribute,\n    toggleVisibility: toggleVisibility,\n    getAttr: getAttribute,\n    remAttr: removeAttribute,\n    setInnerHTML: setInnerHTML,\n    walkAttrs: walkAttributes,\n    createFrag: createFragment,\n    safeInsert: safeInsert,\n    styleObjectToString: styleObjectToString,\n    walkNodes: walkNodes\n  });\n\n  /**\n   * Check against the null and undefined values\n   * @param   { * }  value -\n   * @returns {Boolean} -\n   */\n  function isNil(value) {\n    return isUndefined(value) || value === null\n  }\n\n  /**\n   * Check if passed argument is empty. Different from falsy, because we dont consider 0 or false to be blank\n   * @param { * } value -\n   * @returns { Boolean } -\n   */\n  function isBlank(value) {\n    return isNil(value) || value === ''\n  }\n\n  /**\n   * Check if passed argument is a function\n   * @param   { * } value -\n   * @returns { Boolean } -\n   */\n  function isFunction(value) {\n    return typeof value === T_FUNCTION\n  }\n\n  /**\n   * Check if passed argument is an object, exclude null\n   * NOTE: use isObject(x) && !isArray(x) to excludes arrays.\n   * @param   { * } value -\n   * @returns { Boolean } -\n   */\n  function isObject(value) {\n    return value && typeof value === T_OBJECT // typeof null is 'object'\n  }\n\n  /**\n   * Check if a DOM node is an svg tag or part of an svg\n   * @param   { HTMLElement }  el - node we want to test\n   * @returns {Boolean} true if it's an svg node\n   */\n  function isSvg(el) {\n    var owner = el.ownerSVGElement;\n    return !!owner || owner === null\n  }\n\n  /**\n   * Check if passed argument is a kind of array\n   * @param   { * } value -\n   * @returns { Boolean } -\n   */\n  function isArray(value) {\n    return Array.isArray(value) || value instanceof Array\n  }\n\n  /**\n   * Check if the passed argument is a boolean attribute\n   * @param   { String } value -\n   * @returns { Boolean } -\n   */\n  function isBoolAttr(value) {\n    return RE_BOOL_ATTRS.test(value)\n  }\n\n  /**\n   * Check if passed argument is a string\n   * @param   { * } value -\n   * @returns { Boolean } -\n   */\n  function isString(value) {\n    return typeof value === T_STRING\n  }\n\n\n\n  var check = /*#__PURE__*/Object.freeze({\n    isBlank: isBlank,\n    isFunction: isFunction,\n    isObject: isObject,\n    isSvg: isSvg,\n    isWritable: isWritable,\n    isArray: isArray,\n    isBoolAttr: isBoolAttr,\n    isNil: isNil,\n    isString: isString,\n    isUndefined: isUndefined\n  });\n\n  /**\n   * Check whether an array contains an item\n   * @param   { Array } array - target array\n   * @param   { * } item - item to test\n   * @returns { Boolean } -\n   */\n  function contains(array, item) {\n    return array.indexOf(item) !== -1\n  }\n\n  /**\n   * Specialized function for looping an array-like collection with `each={}`\n   * @param   { Array } list - collection of items\n   * @param   {Function} fn - callback function\n   * @returns { Array } the array looped\n   */\n  function each(list, fn) {\n    var len = list ? list.length : 0;\n    var i = 0;\n    for (; i < len; i++) { fn(list[i], i); }\n    return list\n  }\n\n  /**\n   * Faster String startsWith alternative\n   * @param   { String } str - source string\n   * @param   { String } value - test string\n   * @returns { Boolean } -\n   */\n  function startsWith(str, value) {\n    return str.slice(0, value.length) === value\n  }\n\n  /**\n   * Function returning always a unique identifier\n   * @returns { Number } - number from 0...n\n   */\n  var uid = (function uid() {\n    var i = -1;\n    return function () { return ++i; }\n  })();\n\n  /**\n   * Helper function to set an immutable property\n   * @param   { Object } el - object where the new property will be set\n   * @param   { String } key - object key where the new property will be stored\n   * @param   { * } value - value of the new property\n   * @param   { Object } options - set the propery overriding the default options\n   * @returns { Object } - the initial object\n   */\n  function define(el, key, value, options) {\n    Object.defineProperty(el, key, extend({\n      value: value,\n      enumerable: false,\n      writable: false,\n      configurable: true\n    }, options));\n    return el\n  }\n\n  /**\n   * Convert a string containing dashes to camel case\n   * @param   { String } str - input string\n   * @returns { String } my-string -> myString\n   */\n  function toCamel(str) {\n    return str.replace(/-(\\w)/g, function (_, c) { return c.toUpperCase(); })\n  }\n\n  /**\n   * Warn a message via console\n   * @param   {String} message - warning message\n   */\n  function warn(message) {\n    if (console && console.warn) { console.warn(message); }\n  }\n\n\n\n  var misc = /*#__PURE__*/Object.freeze({\n    contains: contains,\n    each: each,\n    getPropDescriptor: getPropDescriptor,\n    startsWith: startsWith,\n    uid: uid,\n    defineProperty: define,\n    objectCreate: create,\n    extend: extend,\n    toCamel: toCamel,\n    warn: warn\n  });\n\n  /**\n   * Set the property of an object for a given key. If something already\n   * exists there, then it becomes an array containing both the old and new value.\n   * @param { Object } obj - object on which to set the property\n   * @param { String } key - property name\n   * @param { Object } value - the value of the property to be set\n   * @param { Boolean } ensureArray - ensure that the property remains an array\n   * @param { Number } index - add the new item in a certain array position\n   */\n  function arrayishAdd(obj, key, value, ensureArray, index) {\n    var dest = obj[key];\n    var isArr = isArray(dest);\n    var hasIndex = !isUndefined(index);\n\n    if (dest && dest === value) { return }\n\n    // if the key was never set, set it once\n    if (!dest && ensureArray) { obj[key] = [value]; }\n    else if (!dest) { obj[key] = value; }\n    // if it was an array and not yet set\n    else {\n      if (isArr) {\n        var oldIndex = dest.indexOf(value);\n        // this item never changed its position\n        if (oldIndex === index) { return }\n        // remove the item from its old position\n        if (oldIndex !== -1) { dest.splice(oldIndex, 1); }\n        // move or add the item\n        if (hasIndex) {\n          dest.splice(index, 0, value);\n        } else {\n          dest.push(value);\n        }\n      } else { obj[key] = [dest, value]; }\n    }\n  }\n\n  /**\n   * Detect the tag implementation by a DOM node\n   * @param   { Object } dom - DOM node we need to parse to get its tag implementation\n   * @returns { Object } it returns an object containing the implementation of a custom tag (template and boot function)\n   */\n  function get(dom) {\n    return dom.tagName && __TAG_IMPL[getAttribute(dom, IS_DIRECTIVE) ||\n      getAttribute(dom, IS_DIRECTIVE) || dom.tagName.toLowerCase()]\n  }\n\n  /**\n   * Get the tag name of any DOM node\n   * @param   { Object } dom - DOM node we want to parse\n   * @param   { Boolean } skipDataIs - hack to ignore the data-is attribute when attaching to parent\n   * @returns { String } name to identify this dom node in riot\n   */\n  function getName(dom, skipDataIs) {\n    var child = get(dom);\n    var namedTag = !skipDataIs && getAttribute(dom, IS_DIRECTIVE);\n    return namedTag && !tmpl.hasExpr(namedTag) ?\n      namedTag : child ? child.name : dom.tagName.toLowerCase()\n  }\n\n  /**\n   * Return a temporary context containing also the parent properties\n   * @this Tag\n   * @param { Tag } - temporary tag context containing all the parent properties\n   */\n  function inheritParentProps() {\n    if (this.parent) { return extend(create(this), this.parent) }\n    return this\n  }\n\n  /*\n    Includes hacks needed for the Internet Explorer version 9 and below\n    See: http://kangax.github.io/compat-table/es5/#ie8\n         http://codeplanet.io/dropping-ie8/\n  */\n\n  var\n    reHasYield  = /<yield\\b/i,\n    reYieldAll  = /<yield\\s*(?:\\/>|>([\\S\\s]*?)<\\/yield\\s*>|>)/ig,\n    reYieldSrc  = /<yield\\s+to=['\"]([^'\">]*)['\"]\\s*>([\\S\\s]*?)<\\/yield\\s*>/ig,\n    reYieldDest = /<yield\\s+from=['\"]?([-\\w]+)['\"]?\\s*(?:\\/>|>([\\S\\s]*?)<\\/yield\\s*>)/ig,\n    rootEls = { tr: 'tbody', th: 'tr', td: 'tr', col: 'colgroup' },\n    tblTags = IE_VERSION && IE_VERSION < 10 ? RE_SPECIAL_TAGS : RE_SPECIAL_TAGS_NO_OPTION,\n    GENERIC = 'div',\n    SVG = 'svg';\n\n\n  /*\n    Creates the root element for table or select child elements:\n    tr/th/td/thead/tfoot/tbody/caption/col/colgroup/option/optgroup\n  */\n  function specialTags(el, tmpl, tagName) {\n\n    var\n      select = tagName[0] === 'o',\n      parent = select ? 'select>' : 'table>';\n\n    // trim() is important here, this ensures we don't have artifacts,\n    // so we can check if we have only one element inside the parent\n    el.innerHTML = '<' + parent + tmpl.trim() + '</' + parent;\n    parent = el.firstChild;\n\n    // returns the immediate parent if tr/th/td/col is the only element, if not\n    // returns the whole tree, as this can include additional elements\n    /* istanbul ignore next */\n    if (select) {\n      parent.selectedIndex = -1;  // for IE9, compatible w/current riot behavior\n    } else {\n      // avoids insertion of cointainer inside container (ex: tbody inside tbody)\n      var tname = rootEls[tagName];\n      if (tname && parent.childElementCount === 1) { parent = $(tname, parent); }\n    }\n    return parent\n  }\n\n  /*\n    Replace the yield tag from any tag template with the innerHTML of the\n    original tag in the page\n  */\n  function replaceYield(tmpl, html) {\n    // do nothing if no yield\n    if (!reHasYield.test(tmpl)) { return tmpl }\n\n    // be careful with #1343 - string on the source having `$1`\n    var src = {};\n\n    html = html && html.replace(reYieldSrc, function (_, ref, text) {\n      src[ref] = src[ref] || text;   // preserve first definition\n      return ''\n    }).trim();\n\n    return tmpl\n      .replace(reYieldDest, function (_, ref, def) {  // yield with from - to attrs\n        return src[ref] || def || ''\n      })\n      .replace(reYieldAll, function (_, def) {        // yield without any \"from\"\n        return html || def || ''\n      })\n  }\n\n  /**\n   * Creates a DOM element to wrap the given content. Normally an `DIV`, but can be\n   * also a `TABLE`, `SELECT`, `TBODY`, `TR`, or `COLGROUP` element.\n   *\n   * @param   { String } tmpl  - The template coming from the custom tag definition\n   * @param   { String } html - HTML content that comes from the DOM element where you\n   *           will mount the tag, mostly the original tag in the page\n   * @param   { Boolean } isSvg - true if the root node is an svg\n   * @returns { HTMLElement } DOM element with _tmpl_ merged through `YIELD` with the _html_.\n   */\n  function mkdom(tmpl, html, isSvg) {\n    var match   = tmpl && tmpl.match(/^\\s*<([-\\w]+)/);\n    var  tagName = match && match[1].toLowerCase();\n    var el = makeElement(isSvg ? SVG : GENERIC);\n\n    // replace all the yield tags with the tag inner html\n    tmpl = replaceYield(tmpl, html);\n\n    /* istanbul ignore next */\n    if (tblTags.test(tagName))\n      { el = specialTags(el, tmpl, tagName); }\n    else\n      { setInnerHTML(el, tmpl, isSvg); }\n\n    return el\n  }\n\n  var EVENT_ATTR_RE = /^on/;\n\n  /**\n   * True if the event attribute starts with 'on'\n   * @param   { String } attribute - event attribute\n   * @returns { Boolean }\n   */\n  function isEventAttribute(attribute) {\n    return EVENT_ATTR_RE.test(attribute)\n  }\n\n  /**\n   * Loop backward all the parents tree to detect the first custom parent tag\n   * @param   { Object } tag - a Tag instance\n   * @returns { Object } the instance of the first custom parent tag found\n   */\n  function getImmediateCustomParent(tag) {\n    var ptag = tag;\n    while (ptag.__.isAnonymous) {\n      if (!ptag.parent) { break }\n      ptag = ptag.parent;\n    }\n    return ptag\n  }\n\n  /**\n   * Trigger DOM events\n   * @param   { HTMLElement } dom - dom element target of the event\n   * @param   { Function } handler - user function\n   * @param   { Object } e - event object\n   */\n  function handleEvent(dom, handler, e) {\n    var ptag = this.__.parent;\n    var item = this.__.item;\n\n    if (!item)\n      { while (ptag && !item) {\n        item = ptag.__.item;\n        ptag = ptag.__.parent;\n      } }\n\n    // override the event properties\n    /* istanbul ignore next */\n    if (isWritable(e, 'currentTarget')) { e.currentTarget = dom; }\n    /* istanbul ignore next */\n    if (isWritable(e, 'target')) { e.target = e.srcElement; }\n    /* istanbul ignore next */\n    if (isWritable(e, 'which')) { e.which = e.charCode || e.keyCode; }\n\n    e.item = item;\n\n    handler.call(this, e);\n\n    // avoid auto updates\n    if (!settings.autoUpdate) { return }\n\n    if (!e.preventUpdate) {\n      var p = getImmediateCustomParent(this);\n      // fixes #2083\n      if (p.isMounted) { p.update(); }\n    }\n  }\n\n  /**\n   * Attach an event to a DOM node\n   * @param { String } name - event name\n   * @param { Function } handler - event callback\n   * @param { Object } dom - dom node\n   * @param { Tag } tag - tag instance\n   */\n  function setEventHandler(name, handler, dom, tag) {\n    var eventName;\n    var cb = handleEvent.bind(tag, dom, handler);\n\n    // avoid to bind twice the same event\n    // possible fix for #2332\n    dom[name] = null;\n\n    // normalize event name\n    eventName = name.replace(RE_EVENTS_PREFIX, '');\n\n    // cache the listener into the listeners array\n    if (!contains(tag.__.listeners, dom)) { tag.__.listeners.push(dom); }\n    if (!dom[RIOT_EVENTS_KEY]) { dom[RIOT_EVENTS_KEY] = {}; }\n    if (dom[RIOT_EVENTS_KEY][name]) { dom.removeEventListener(eventName, dom[RIOT_EVENTS_KEY][name]); }\n\n    dom[RIOT_EVENTS_KEY][name] = cb;\n    dom.addEventListener(eventName, cb, false);\n  }\n\n  /**\n   * Create a new child tag including it correctly into its parent\n   * @param   { Object } child - child tag implementation\n   * @param   { Object } opts - tag options containing the DOM node where the tag will be mounted\n   * @param   { String } innerHTML - inner html of the child node\n   * @param   { Object } parent - instance of the parent tag including the child custom tag\n   * @returns { Object } instance of the new child tag just created\n   */\n  function initChild(child, opts, innerHTML, parent) {\n    var tag = createTag(child, opts, innerHTML);\n    var tagName = opts.tagName || getName(opts.root, true);\n    var ptag = getImmediateCustomParent(parent);\n    // fix for the parent attribute in the looped elements\n    define(tag, 'parent', ptag);\n    // store the real parent tag\n    // in some cases this could be different from the custom parent tag\n    // for example in nested loops\n    tag.__.parent = parent;\n\n    // add this tag to the custom parent tag\n    arrayishAdd(ptag.tags, tagName, tag);\n\n    // and also to the real parent tag\n    if (ptag !== parent)\n      { arrayishAdd(parent.tags, tagName, tag); }\n\n    return tag\n  }\n\n  /**\n   * Removes an item from an object at a given key. If the key points to an array,\n   * then the item is just removed from the array.\n   * @param { Object } obj - object on which to remove the property\n   * @param { String } key - property name\n   * @param { Object } value - the value of the property to be removed\n   * @param { Boolean } ensureArray - ensure that the property remains an array\n  */\n  function arrayishRemove(obj, key, value, ensureArray) {\n    if (isArray(obj[key])) {\n      var index = obj[key].indexOf(value);\n      if (index !== -1) { obj[key].splice(index, 1); }\n      if (!obj[key].length) { delete obj[key]; }\n      else if (obj[key].length === 1 && !ensureArray) { obj[key] = obj[key][0]; }\n    } else if (obj[key] === value)\n      { delete obj[key]; } // otherwise just delete the key\n  }\n\n  /**\n   * Adds the elements for a virtual tag\n   * @this Tag\n   * @param { Node } src - the node that will do the inserting or appending\n   * @param { Tag } target - only if inserting, insert before this tag's first child\n   */\n  function makeVirtual(src, target) {\n    var this$1 = this;\n\n    var head = createDOMPlaceholder();\n    var tail = createDOMPlaceholder();\n    var frag = createFragment();\n    var sib;\n    var el;\n\n    this.root.insertBefore(head, this.root.firstChild);\n    this.root.appendChild(tail);\n\n    this.__.head = el = head;\n    this.__.tail = tail;\n\n    while (el) {\n      sib = el.nextSibling;\n      frag.appendChild(el);\n      this$1.__.virts.push(el); // hold for unmounting\n      el = sib;\n    }\n\n    if (target)\n      { src.insertBefore(frag, target.__.head); }\n    else\n      { src.appendChild(frag); }\n  }\n\n  /**\n   * makes a tag virtual and replaces a reference in the dom\n   * @this Tag\n   * @param { tag } the tag to make virtual\n   * @param { ref } the dom reference location\n   */\n  function makeReplaceVirtual(tag, ref) {\n    if (!ref.parentNode) { return }\n    var frag = createFragment();\n    makeVirtual.call(tag, frag);\n    ref.parentNode.replaceChild(frag, ref);\n  }\n\n  /**\n   * Update dynamically created data-is tags with changing expressions\n   * @param { Object } expr - expression tag and expression info\n   * @param { Tag }    parent - parent for tag creation\n   * @param { String } tagName - tag implementation we want to use\n   */\n  function updateDataIs(expr, parent, tagName) {\n    var tag = expr.tag || expr.dom._tag;\n    var ref;\n\n    var ref$1 = tag ? tag.__ : {};\n    var head = ref$1.head;\n    var isVirtual = expr.dom.tagName === 'VIRTUAL';\n\n    if (tag && expr.tagName === tagName) {\n      tag.update();\n      return\n    }\n\n    // sync _parent to accommodate changing tagnames\n    if (tag) {\n      // need placeholder before unmount\n      if(isVirtual) {\n        ref = createDOMPlaceholder();\n        head.parentNode.insertBefore(ref, head);\n      }\n\n      tag.unmount(true);\n    }\n\n    // unable to get the tag name\n    if (!isString(tagName)) { return }\n\n    expr.impl = __TAG_IMPL[tagName];\n\n    // unknown implementation\n    if (!expr.impl) { return }\n\n    expr.tag = tag = initChild(\n      expr.impl, {\n        root: expr.dom,\n        parent: parent,\n        tagName: tagName\n      },\n      expr.dom.innerHTML,\n      parent\n    );\n\n    each(expr.attrs, function (a) { return setAttribute(tag.root, a.name, a.value); });\n    expr.tagName = tagName;\n    tag.mount();\n\n    // root exist first time, after use placeholder\n    if (isVirtual) { makeReplaceVirtual(tag, ref || tag.root); }\n\n    // parent is the placeholder tag, not the dynamic tag so clean up\n    parent.__.onUnmount = function () {\n      var delName = tag.opts.dataIs;\n      arrayishRemove(tag.parent.tags, delName, tag);\n      arrayishRemove(tag.__.parent.tags, delName, tag);\n      tag.unmount();\n    };\n  }\n\n  /**\n   * Nomalize any attribute removing the \"riot-\" prefix\n   * @param   { String } attrName - original attribute name\n   * @returns { String } valid html attribute name\n   */\n  function normalizeAttrName(attrName) {\n    if (!attrName) { return null }\n    attrName = attrName.replace(ATTRS_PREFIX, '');\n    if (CASE_SENSITIVE_ATTRIBUTES[attrName]) { attrName = CASE_SENSITIVE_ATTRIBUTES[attrName]; }\n    return attrName\n  }\n\n  /**\n   * Update on single tag expression\n   * @this Tag\n   * @param { Object } expr - expression logic\n   * @returns { undefined }\n   */\n  function updateExpression(expr) {\n    if (this.root && getAttribute(this.root,'virtualized')) { return }\n\n    var dom = expr.dom;\n    // remove the riot- prefix\n    var attrName = normalizeAttrName(expr.attr);\n    var isToggle = contains([SHOW_DIRECTIVE, HIDE_DIRECTIVE], attrName);\n    var isVirtual = expr.root && expr.root.tagName === 'VIRTUAL';\n    var ref = this.__;\n    var isAnonymous = ref.isAnonymous;\n    var parent = dom && (expr.parent || dom.parentNode);\n    var keepValueAttributes = settings.keepValueAttributes;\n    // detect the style attributes\n    var isStyleAttr = attrName === 'style';\n    var isClassAttr = attrName === 'class';\n    var isValueAttr = attrName === 'value';\n\n    var value;\n\n    // if it's a tag we could totally skip the rest\n    if (expr._riot_id) {\n      if (expr.__.wasCreated) {\n        expr.update();\n      // if it hasn't been mounted yet, do that now.\n      } else {\n        expr.mount();\n        if (isVirtual) {\n          makeReplaceVirtual(expr, expr.root);\n        }\n      }\n      return\n    }\n\n    // if this expression has the update method it means it can handle the DOM changes by itself\n    if (expr.update) { return expr.update() }\n\n    var context = isToggle && !isAnonymous ? inheritParentProps.call(this) : this;\n\n    // ...it seems to be a simple expression so we try to calculate its value\n    value = tmpl(expr.expr, context);\n\n    var hasValue = !isBlank(value);\n    var isObj = isObject(value);\n\n    // convert the style/class objects to strings\n    if (isObj) {\n      if (isClassAttr) {\n        value = tmpl(JSON.stringify(value), this);\n      } else if (isStyleAttr) {\n        value = styleObjectToString(value);\n      }\n    }\n\n    // remove original attribute\n    if (expr.attr &&\n        (\n          // the original attribute can be removed only if we are parsing the original expression\n          !expr.wasParsedOnce ||\n          // or its value is false\n          value === false ||\n          // or if its value is currently falsy...\n          // We will keep the \"value\" attributes if the \"keepValueAttributes\"\n          // is enabled though\n          (!hasValue && (!isValueAttr || isValueAttr && !keepValueAttributes))\n        )\n    ) {\n      // remove either riot-* attributes or just the attribute name\n      removeAttribute(dom, getAttribute(dom, expr.attr) ? expr.attr : attrName);\n    }\n\n    // for the boolean attributes we don't need the value\n    // we can convert it to checked=true to checked=checked\n    if (expr.bool) { value = value ? attrName : false; }\n    if (expr.isRtag) { return updateDataIs(expr, this, value) }\n    if (expr.wasParsedOnce && expr.value === value) { return }\n\n    // update the expression value\n    expr.value = value;\n    expr.wasParsedOnce = true;\n\n    // if the value is an object (and it's not a style or class attribute) we can not do much more with it\n    if (isObj && !isClassAttr && !isStyleAttr && !isToggle) { return }\n    // avoid to render undefined/null values\n    if (!hasValue) { value = ''; }\n\n    // textarea and text nodes have no attribute name\n    if (!attrName) {\n      // about #815 w/o replace: the browser converts the value to a string,\n      // the comparison by \"==\" does too, but not in the server\n      value += '';\n      // test for parent avoids error with invalid assignment to nodeValue\n      if (parent) {\n        // cache the parent node because somehow it will become null on IE\n        // on the next iteration\n        expr.parent = parent;\n        if (parent.tagName === 'TEXTAREA') {\n          parent.value = value;                    // #1113\n          if (!IE_VERSION) { dom.nodeValue = value; }  // #1625 IE throws here, nodeValue\n        }                                         // will be available on 'updated'\n        else { dom.nodeValue = value; }\n      }\n      return\n    }\n\n    switch (true) {\n    // handle events binding\n    case isFunction(value):\n      if (isEventAttribute(attrName)) {\n        setEventHandler(attrName, value, dom, this);\n      }\n      break\n    // show / hide\n    case isToggle:\n      toggleVisibility(dom, attrName === HIDE_DIRECTIVE ? !value : value);\n      break\n    // handle attributes\n    default:\n      if (expr.bool) {\n        dom[attrName] = value;\n      }\n\n      if (isValueAttr && dom.value !== value) {\n        dom.value = value;\n      } else if (hasValue && value !== false) {\n        setAttribute(dom, attrName, value);\n      }\n\n      // make sure that in case of style changes\n      // the element stays hidden\n      if (isStyleAttr && dom.hidden) { toggleVisibility(dom, false); }\n    }\n  }\n\n  /**\n   * Update all the expressions in a Tag instance\n   * @this Tag\n   * @param { Array } expressions - expression that must be re evaluated\n   */\n  function update(expressions) {\n    each(expressions, updateExpression.bind(this));\n  }\n\n  /**\n   * We need to update opts for this tag. That requires updating the expressions\n   * in any attributes on the tag, and then copying the result onto opts.\n   * @this Tag\n   * @param   {Boolean} isLoop - is it a loop tag?\n   * @param   { Tag }  parent - parent tag node\n   * @param   { Boolean }  isAnonymous - is it a tag without any impl? (a tag not registered)\n   * @param   { Object }  opts - tag options\n   * @param   { Array }  instAttrs - tag attributes array\n   */\n  function updateOpts(isLoop, parent, isAnonymous, opts, instAttrs) {\n    // isAnonymous `each` tags treat `dom` and `root` differently. In this case\n    // (and only this case) we don't need to do updateOpts, because the regular parse\n    // will update those attrs. Plus, isAnonymous tags don't need opts anyway\n    if (isLoop && isAnonymous) { return }\n    var ctx = isLoop ? inheritParentProps.call(this) : parent || this;\n\n    each(instAttrs, function (attr) {\n      if (attr.expr) { updateExpression.call(ctx, attr.expr); }\n      // normalize the attribute names\n      opts[toCamel(attr.name).replace(ATTRS_PREFIX, '')] = attr.expr ? attr.expr.value : attr.value;\n    });\n  }\n\n  /**\n   * Update the tag expressions and options\n   * @param { Tag } tag - tag object\n   * @param { * } data - data we want to use to extend the tag properties\n   * @param { Array } expressions - component expressions array\n   * @returns { Tag } the current tag instance\n   */\n  function componentUpdate(tag, data, expressions) {\n    var __ = tag.__;\n    var nextOpts = {};\n    var canTrigger = tag.isMounted && !__.skipAnonymous;\n\n    // inherit properties from the parent tag\n    if (__.isAnonymous && __.parent) { extend(tag, __.parent); }\n    extend(tag, data);\n\n    updateOpts.apply(tag, [__.isLoop, __.parent, __.isAnonymous, nextOpts, __.instAttrs]);\n\n    if (\n      canTrigger &&\n      tag.isMounted &&\n      isFunction(tag.shouldUpdate) && !tag.shouldUpdate(data, nextOpts)\n    ) {\n      return tag\n    }\n\n    extend(tag.opts, nextOpts);\n\n    if (canTrigger) { tag.trigger('update', data); }\n    update.call(tag, expressions);\n    if (canTrigger) { tag.trigger('updated'); }\n\n    return tag\n  }\n\n  /**\n   * Get selectors for tags\n   * @param   { Array } tags - tag names to select\n   * @returns { String } selector\n   */\n  function query(tags) {\n    // select all tags\n    if (!tags) {\n      var keys = Object.keys(__TAG_IMPL);\n      return keys + query(keys)\n    }\n\n    return tags\n      .filter(function (t) { return !/[^-\\w]/.test(t); })\n      .reduce(function (list, t) {\n        var name = t.trim().toLowerCase();\n        return list + \",[\" + IS_DIRECTIVE + \"=\\\"\" + name + \"\\\"]\"\n      }, '')\n  }\n\n  /**\n   * Another way to create a riot tag a bit more es6 friendly\n   * @param { HTMLElement } el - tag DOM selector or DOM node/s\n   * @param { Object } opts - tag logic\n   * @returns { Tag } new riot tag instance\n   */\n  function Tag(el, opts) {\n    // get the tag properties from the class constructor\n    var ref = this;\n    var name = ref.name;\n    var tmpl = ref.tmpl;\n    var css = ref.css;\n    var attrs = ref.attrs;\n    var onCreate = ref.onCreate;\n    // register a new tag and cache the class prototype\n    if (!__TAG_IMPL[name]) {\n      tag(name, tmpl, css, attrs, onCreate);\n      // cache the class constructor\n      __TAG_IMPL[name].class = this.constructor;\n    }\n\n    // mount the tag using the class instance\n    mount$1(el, name, opts, this);\n    // inject the component css\n    if (css) { styleManager.inject(); }\n\n    return this\n  }\n\n  /**\n   * Create a new riot tag implementation\n   * @param   { String }   name - name/id of the new riot tag\n   * @param   { String }   tmpl - tag template\n   * @param   { String }   css - custom tag css\n   * @param   { String }   attrs - root tag attributes\n   * @param   { Function } fn - user function\n   * @returns { String } name/id of the tag just created\n   */\n  function tag(name, tmpl, css, attrs, fn) {\n    if (isFunction(attrs)) {\n      fn = attrs;\n\n      if (/^[\\w-]+\\s?=/.test(css)) {\n        attrs = css;\n        css = '';\n      } else\n        { attrs = ''; }\n    }\n\n    if (css) {\n      if (isFunction(css))\n        { fn = css; }\n      else\n        { styleManager.add(css, name); }\n    }\n\n    name = name.toLowerCase();\n    __TAG_IMPL[name] = { name: name, tmpl: tmpl, attrs: attrs, fn: fn };\n\n    return name\n  }\n\n  /**\n   * Create a new riot tag implementation (for use by the compiler)\n   * @param   { String }   name - name/id of the new riot tag\n   * @param   { String }   tmpl - tag template\n   * @param   { String }   css - custom tag css\n   * @param   { String }   attrs - root tag attributes\n   * @param   { Function } fn - user function\n   * @returns { String } name/id of the tag just created\n   */\n  function tag2(name, tmpl, css, attrs, fn) {\n    if (css) { styleManager.add(css, name); }\n\n    __TAG_IMPL[name] = { name: name, tmpl: tmpl, attrs: attrs, fn: fn };\n\n    return name\n  }\n\n  /**\n   * Mount a tag using a specific tag implementation\n   * @param   { * } selector - tag DOM selector or DOM node/s\n   * @param   { String } tagName - tag implementation name\n   * @param   { Object } opts - tag logic\n   * @returns { Array } new tags instances\n   */\n  function mount(selector, tagName, opts) {\n    var tags = [];\n    var elem, allTags;\n\n    function pushTagsTo(root) {\n      if (root.tagName) {\n        var riotTag = getAttribute(root, IS_DIRECTIVE), tag;\n\n        // have tagName? force riot-tag to be the same\n        if (tagName && riotTag !== tagName) {\n          riotTag = tagName;\n          setAttribute(root, IS_DIRECTIVE, tagName);\n        }\n\n        tag = mount$1(\n          root,\n          riotTag || root.tagName.toLowerCase(),\n          isFunction(opts) ? opts() : opts\n        );\n\n        if (tag)\n          { tags.push(tag); }\n      } else if (root.length)\n        { each(root, pushTagsTo); } // assume nodeList\n    }\n\n    // inject styles into DOM\n    styleManager.inject();\n\n    if (isObject(tagName) || isFunction(tagName)) {\n      opts = tagName;\n      tagName = 0;\n    }\n\n    // crawl the DOM to find the tag\n    if (isString(selector)) {\n      selector = selector === '*' ?\n        // select all registered tags\n        // & tags found with the riot-tag attribute set\n        allTags = query() :\n        // or just the ones named like the selector\n        selector + query(selector.split(/, */));\n\n      // make sure to pass always a selector\n      // to the querySelectorAll function\n      elem = selector ? $$(selector) : [];\n    }\n    else\n      // probably you have passed already a tag or a NodeList\n      { elem = selector; }\n\n    // select all the registered and mount them inside their root elements\n    if (tagName === '*') {\n      // get all custom tags\n      tagName = allTags || query();\n      // if the root els it's just a single tag\n      if (elem.tagName)\n        { elem = $$(tagName, elem); }\n      else {\n        // select all the children for all the different root elements\n        var nodeList = [];\n\n        each(elem, function (_el) { return nodeList.push($$(tagName, _el)); });\n\n        elem = nodeList;\n      }\n      // get rid of the tagName\n      tagName = 0;\n    }\n\n    pushTagsTo(elem);\n\n    return tags\n  }\n\n  // Create a mixin that could be globally shared across all the tags\n  var mixins = {};\n  var globals = mixins[GLOBAL_MIXIN] = {};\n  var mixins_id = 0;\n\n  /**\n   * Create/Return a mixin by its name\n   * @param   { String }  name - mixin name (global mixin if object)\n   * @param   { Object }  mix - mixin logic\n   * @param   { Boolean } g - is global?\n   * @returns { Object }  the mixin logic\n   */\n  function mixin(name, mix, g) {\n    // Unnamed global\n    if (isObject(name)) {\n      mixin((\"__\" + (mixins_id++) + \"__\"), name, true);\n      return\n    }\n\n    var store = g ? globals : mixins;\n\n    // Getter\n    if (!mix) {\n      if (isUndefined(store[name]))\n        { throw new Error((\"Unregistered mixin: \" + name)) }\n\n      return store[name]\n    }\n\n    // Setter\n    store[name] = isFunction(mix) ?\n      extend(mix.prototype, store[name] || {}) && mix :\n      extend(store[name] || {}, mix);\n  }\n\n  /**\n   * Update all the tags instances created\n   * @returns { Array } all the tags instances\n   */\n  function update$1() {\n    return each(__TAGS_CACHE, function (tag) { return tag.update(); })\n  }\n\n  function unregister(name) {\n    styleManager.remove(name);\n    return delete __TAG_IMPL[name]\n  }\n\n  var version = 'v3.13.2';\n\n  var core = /*#__PURE__*/Object.freeze({\n    Tag: Tag,\n    tag: tag,\n    tag2: tag2,\n    mount: mount,\n    mixin: mixin,\n    update: update$1,\n    unregister: unregister,\n    version: version\n  });\n\n  /**\n   * Add a mixin to this tag\n   * @returns { Tag } the current tag instance\n   */\n  function componentMixin(tag$$1) {\n    var mixins = [], len = arguments.length - 1;\n    while ( len-- > 0 ) mixins[ len ] = arguments[ len + 1 ];\n\n    each(mixins, function (mix) {\n      var instance;\n      var obj;\n      var props = [];\n\n      // properties blacklisted and will not be bound to the tag instance\n      var propsBlacklist = ['init', '__proto__'];\n\n      mix = isString(mix) ? mixin(mix) : mix;\n\n      // check if the mixin is a function\n      if (isFunction(mix)) {\n        // create the new mixin instance\n        instance = new mix();\n      } else { instance = mix; }\n\n      var proto = Object.getPrototypeOf(instance);\n\n      // build multilevel prototype inheritance chain property list\n      do { props = props.concat(Object.getOwnPropertyNames(obj || instance)); }\n      while (obj = Object.getPrototypeOf(obj || instance))\n\n      // loop the keys in the function prototype or the all object keys\n      each(props, function (key) {\n        // bind methods to tag\n        // allow mixins to override other properties/parent mixins\n        if (!contains(propsBlacklist, key)) {\n          // check for getters/setters\n          var descriptor = getPropDescriptor(instance, key) || getPropDescriptor(proto, key);\n          var hasGetterSetter = descriptor && (descriptor.get || descriptor.set);\n\n          // apply method only if it does not already exist on the instance\n          if (!tag$$1.hasOwnProperty(key) && hasGetterSetter) {\n            Object.defineProperty(tag$$1, key, descriptor);\n          } else {\n            tag$$1[key] = isFunction(instance[key]) ?\n              instance[key].bind(tag$$1) :\n              instance[key];\n          }\n        }\n      });\n\n      // init method will be called automatically\n      if (instance.init)\n        { instance.init.bind(tag$$1)(tag$$1.opts); }\n    });\n\n    return tag$$1\n  }\n\n  /**\n   * Move the position of a custom tag in its parent tag\n   * @this Tag\n   * @param   { String } tagName - key where the tag was stored\n   * @param   { Number } newPos - index where the new tag will be stored\n   */\n  function moveChild(tagName, newPos) {\n    var parent = this.parent;\n    var tags;\n    // no parent no move\n    if (!parent) { return }\n\n    tags = parent.tags[tagName];\n\n    if (isArray(tags))\n      { tags.splice(newPos, 0, tags.splice(tags.indexOf(this), 1)[0]); }\n    else { arrayishAdd(parent.tags, tagName, this); }\n  }\n\n  /**\n   * Move virtual tag and all child nodes\n   * @this Tag\n   * @param { Node } src  - the node that will do the inserting\n   * @param { Tag } target - insert before this tag's first child\n   */\n  function moveVirtual(src, target) {\n    var this$1 = this;\n\n    var el = this.__.head;\n    var sib;\n    var frag = createFragment();\n\n    while (el) {\n      sib = el.nextSibling;\n      frag.appendChild(el);\n      el = sib;\n      if (el === this$1.__.tail) {\n        frag.appendChild(el);\n        src.insertBefore(frag, target.__.head);\n        break\n      }\n    }\n  }\n\n  /**\n   * Convert the item looped into an object used to extend the child tag properties\n   * @param   { Object } expr - object containing the keys used to extend the children tags\n   * @param   { * } key - value to assign to the new object returned\n   * @param   { * } val - value containing the position of the item in the array\n   * @returns { Object } - new object containing the values of the original item\n   *\n   * The variables 'key' and 'val' are arbitrary.\n   * They depend on the collection type looped (Array, Object)\n   * and on the expression used on the each tag\n   *\n   */\n  function mkitem(expr, key, val) {\n    var item = {};\n    item[expr.key] = key;\n    if (expr.pos) { item[expr.pos] = val; }\n    return item\n  }\n\n  /**\n   * Unmount the redundant tags\n   * @param   { Array } items - array containing the current items to loop\n   * @param   { Array } tags - array containing all the children tags\n   */\n  function unmountRedundant(items, tags, filteredItemsCount) {\n    var i = tags.length;\n    var j = items.length - filteredItemsCount;\n\n    while (i > j) {\n      i--;\n      remove.apply(tags[i], [tags, i]);\n    }\n  }\n\n\n  /**\n   * Remove a child tag\n   * @this Tag\n   * @param   { Array } tags - tags collection\n   * @param   { Number } i - index of the tag to remove\n   */\n  function remove(tags, i) {\n    tags.splice(i, 1);\n    this.unmount();\n    arrayishRemove(this.parent, this, this.__.tagName, true);\n  }\n\n  /**\n   * Move the nested custom tags in non custom loop tags\n   * @this Tag\n   * @param   { Number } i - current position of the loop tag\n   */\n  function moveNestedTags(i) {\n    var this$1 = this;\n\n    each(Object.keys(this.tags), function (tagName) {\n      moveChild.apply(this$1.tags[tagName], [tagName, i]);\n    });\n  }\n\n  /**\n   * Move a child tag\n   * @this Tag\n   * @param   { HTMLElement } root - dom node containing all the loop children\n   * @param   { Tag } nextTag - instance of the next tag preceding the one we want to move\n   * @param   { Boolean } isVirtual - is it a virtual tag?\n   */\n  function move(root, nextTag, isVirtual) {\n    if (isVirtual)\n      { moveVirtual.apply(this, [root, nextTag]); }\n    else\n      { safeInsert(root, this.root, nextTag.root); }\n  }\n\n  /**\n   * Insert and mount a child tag\n   * @this Tag\n   * @param   { HTMLElement } root - dom node containing all the loop children\n   * @param   { Tag } nextTag - instance of the next tag preceding the one we want to insert\n   * @param   { Boolean } isVirtual - is it a virtual tag?\n   */\n  function insert(root, nextTag, isVirtual) {\n    if (isVirtual)\n      { makeVirtual.apply(this, [root, nextTag]); }\n    else\n      { safeInsert(root, this.root, nextTag.root); }\n  }\n\n  /**\n   * Append a new tag into the DOM\n   * @this Tag\n   * @param   { HTMLElement } root - dom node containing all the loop children\n   * @param   { Boolean } isVirtual - is it a virtual tag?\n   */\n  function append(root, isVirtual) {\n    if (isVirtual)\n      { makeVirtual.call(this, root); }\n    else\n      { root.appendChild(this.root); }\n  }\n\n  /**\n   * Return the value we want to use to lookup the postion of our items in the collection\n   * @param   { String }  keyAttr         - lookup string or expression\n   * @param   { * }       originalItem    - original item from the collection\n   * @param   { Object }  keyedItem       - object created by riot via { item, i in collection }\n   * @param   { Boolean } hasKeyAttrExpr  - flag to check whether the key is an expression\n   * @returns { * } value that we will use to figure out the item position via collection.indexOf\n   */\n  function getItemId(keyAttr, originalItem, keyedItem, hasKeyAttrExpr) {\n    if (keyAttr) {\n      return hasKeyAttrExpr ?  tmpl(keyAttr, keyedItem) :  originalItem[keyAttr]\n    }\n\n    return originalItem\n  }\n\n  /**\n   * Manage tags having the 'each'\n   * @param   { HTMLElement } dom - DOM node we need to loop\n   * @param   { Tag } parent - parent tag instance where the dom node is contained\n   * @param   { String } expr - string contained in the 'each' attribute\n   * @returns { Object } expression object for this each loop\n   */\n  function _each(dom, parent, expr) {\n    var mustReorder = typeof getAttribute(dom, LOOP_NO_REORDER_DIRECTIVE) !== T_STRING || removeAttribute(dom, LOOP_NO_REORDER_DIRECTIVE);\n    var keyAttr = getAttribute(dom, KEY_DIRECTIVE);\n    var hasKeyAttrExpr = keyAttr ? tmpl.hasExpr(keyAttr) : false;\n    var tagName = getName(dom);\n    var impl = __TAG_IMPL[tagName];\n    var parentNode = dom.parentNode;\n    var placeholder = createDOMPlaceholder();\n    var child = get(dom);\n    var ifExpr = getAttribute(dom, CONDITIONAL_DIRECTIVE);\n    var tags = [];\n    var isLoop = true;\n    var innerHTML = dom.innerHTML;\n    var isAnonymous = !__TAG_IMPL[tagName];\n    var isVirtual = dom.tagName === 'VIRTUAL';\n    var oldItems = [];\n\n    // remove the each property from the original tag\n    removeAttribute(dom, LOOP_DIRECTIVE);\n    removeAttribute(dom, KEY_DIRECTIVE);\n\n    // parse the each expression\n    expr = tmpl.loopKeys(expr);\n    expr.isLoop = true;\n\n    if (ifExpr) { removeAttribute(dom, CONDITIONAL_DIRECTIVE); }\n\n    // insert a marked where the loop tags will be injected\n    parentNode.insertBefore(placeholder, dom);\n    parentNode.removeChild(dom);\n\n    expr.update = function updateEach() {\n      // get the new items collection\n      expr.value = tmpl(expr.val, parent);\n\n      var items = expr.value;\n      var frag = createFragment();\n      var isObject = !isArray(items) && !isString(items);\n      var root = placeholder.parentNode;\n      var tmpItems = [];\n      var hasKeys = isObject && !!items;\n\n      // if this DOM was removed the update here is useless\n      // this condition fixes also a weird async issue on IE in our unit test\n      if (!root) { return }\n\n      // object loop. any changes cause full redraw\n      if (isObject) {\n        items = items ? Object.keys(items).map(function (key) { return mkitem(expr, items[key], key); }) : [];\n      }\n\n      // store the amount of filtered items\n      var filteredItemsCount = 0;\n\n      // loop all the new items\n      each(items, function (_item, index) {\n        var i = index - filteredItemsCount;\n        var item = !hasKeys && expr.key ? mkitem(expr, _item, index) : _item;\n\n        // skip this item because it must be filtered\n        if (ifExpr && !tmpl(ifExpr, extend(create(parent), item))) {\n          filteredItemsCount ++;\n          return\n        }\n\n        var itemId = getItemId(keyAttr, _item, item, hasKeyAttrExpr);\n        // reorder only if the items are not objects\n        // or a key attribute has been provided\n        var doReorder = !isObject && mustReorder && typeof _item === T_OBJECT || keyAttr;\n        var oldPos = oldItems.indexOf(itemId);\n        var isNew = oldPos === -1;\n        var pos = !isNew && doReorder ? oldPos : i;\n        // does a tag exist in this position?\n        var tag = tags[pos];\n        var mustAppend = i >= oldItems.length;\n        var mustCreate = doReorder && isNew || !doReorder && !tag || !tags[i];\n\n        // new tag\n        if (mustCreate) {\n          tag = createTag(impl, {\n            parent: parent,\n            isLoop: isLoop,\n            isAnonymous: isAnonymous,\n            tagName: tagName,\n            root: dom.cloneNode(isAnonymous),\n            item: item,\n            index: i,\n          }, innerHTML);\n\n          // mount the tag\n          tag.mount();\n\n          if (mustAppend)\n            { append.apply(tag, [frag || root, isVirtual]); }\n          else\n            { insert.apply(tag, [root, tags[i], isVirtual]); }\n\n          if (!mustAppend) { oldItems.splice(i, 0, item); }\n          tags.splice(i, 0, tag);\n          if (child) { arrayishAdd(parent.tags, tagName, tag, true); }\n        } else if (pos !== i && doReorder) {\n          // move\n          if (keyAttr || contains(items, oldItems[pos])) {\n            move.apply(tag, [root, tags[i], isVirtual]);\n            // move the old tag instance\n            tags.splice(i, 0, tags.splice(pos, 1)[0]);\n            // move the old item\n            oldItems.splice(i, 0, oldItems.splice(pos, 1)[0]);\n          }\n\n          // update the position attribute if it exists\n          if (expr.pos) { tag[expr.pos] = i; }\n\n          // if the loop tags are not custom\n          // we need to move all their custom tags into the right position\n          if (!child && tag.tags) { moveNestedTags.call(tag, i); }\n        }\n\n        // cache the original item to use it in the events bound to this node\n        // and its children\n        extend(tag.__, {\n          item: item,\n          index: i,\n          parent: parent\n        });\n\n        tmpItems[i] = itemId;\n\n        if (!mustCreate) { tag.update(item); }\n      });\n\n      // remove the redundant tags\n      unmountRedundant(items, tags, filteredItemsCount);\n\n      // clone the items array\n      oldItems = tmpItems.slice();\n\n      root.insertBefore(frag, placeholder);\n    };\n\n    expr.unmount = function () {\n      each(tags, function (t) { t.unmount(); });\n    };\n\n    return expr\n  }\n\n  var RefExpr = {\n    init: function init(dom, parent, attrName, attrValue) {\n      this.dom = dom;\n      this.attr = attrName;\n      this.rawValue = attrValue;\n      this.parent = parent;\n      this.hasExp = tmpl.hasExpr(attrValue);\n      return this\n    },\n    update: function update() {\n      var old = this.value;\n      var customParent = this.parent && getImmediateCustomParent(this.parent);\n      // if the referenced element is a custom tag, then we set the tag itself, rather than DOM\n      var tagOrDom = this.dom.__ref || this.tag || this.dom;\n\n      this.value = this.hasExp ? tmpl(this.rawValue, this.parent) : this.rawValue;\n\n      // the name changed, so we need to remove it from the old key (if present)\n      if (!isBlank(old) && customParent) { arrayishRemove(customParent.refs, old, tagOrDom); }\n      if (!isBlank(this.value) && isString(this.value)) {\n        // add it to the refs of parent tag (this behavior was changed >=3.0)\n        if (customParent) { arrayishAdd(\n          customParent.refs,\n          this.value,\n          tagOrDom,\n          // use an array if it's a looped node and the ref is not an expression\n          null,\n          this.parent.__.index\n        ); }\n\n        if (this.value !== old) {\n          setAttribute(this.dom, this.attr, this.value);\n        }\n      } else {\n        removeAttribute(this.dom, this.attr);\n      }\n\n      // cache the ref bound to this dom node\n      // to reuse it in future (see also #2329)\n      if (!this.dom.__ref) { this.dom.__ref = tagOrDom; }\n    },\n    unmount: function unmount() {\n      var tagOrDom = this.tag || this.dom;\n      var customParent = this.parent && getImmediateCustomParent(this.parent);\n      if (!isBlank(this.value) && customParent)\n        { arrayishRemove(customParent.refs, this.value, tagOrDom); }\n    }\n  };\n\n  /**\n   * Create a new ref directive\n   * @param   { HTMLElement } dom - dom node having the ref attribute\n   * @param   { Tag } context - tag instance where the DOM node is located\n   * @param   { String } attrName - either 'ref' or 'data-ref'\n   * @param   { String } attrValue - value of the ref attribute\n   * @returns { RefExpr } a new RefExpr object\n   */\n  function createRefDirective(dom, tag, attrName, attrValue) {\n    return create(RefExpr).init(dom, tag, attrName, attrValue)\n  }\n\n  /**\n   * Trigger the unmount method on all the expressions\n   * @param   { Array } expressions - DOM expressions\n   */\n  function unmountAll(expressions) {\n    each(expressions, function (expr) {\n      if (expr.unmount) { expr.unmount(true); }\n      else if (expr.tagName) { expr.tag.unmount(true); }\n      else if (expr.unmount) { expr.unmount(); }\n    });\n  }\n\n  var IfExpr = {\n    init: function init(dom, tag, expr) {\n      removeAttribute(dom, CONDITIONAL_DIRECTIVE);\n      extend(this, { tag: tag, expr: expr, stub: createDOMPlaceholder(), pristine: dom });\n      var p = dom.parentNode;\n      p.insertBefore(this.stub, dom);\n      p.removeChild(dom);\n\n      return this\n    },\n    update: function update$$1() {\n      this.value = tmpl(this.expr, this.tag);\n\n      if (!this.stub.parentNode) { return }\n\n      if (this.value && !this.current) { // insert\n        this.current = this.pristine.cloneNode(true);\n        this.stub.parentNode.insertBefore(this.current, this.stub);\n        this.expressions = parseExpressions.apply(this.tag, [this.current, true]);\n      } else if (!this.value && this.current) { // remove\n        this.unmount();\n        this.current = null;\n        this.expressions = [];\n      }\n\n      if (this.value) { update.call(this.tag, this.expressions); }\n    },\n    unmount: function unmount() {\n      if (this.current) {\n        if (this.current._tag) {\n          this.current._tag.unmount();\n        } else if (this.current.parentNode) {\n          this.current.parentNode.removeChild(this.current);\n        }\n      }\n\n      unmountAll(this.expressions || []);\n    }\n  };\n\n  /**\n   * Create a new if directive\n   * @param   { HTMLElement } dom - if root dom node\n   * @param   { Tag } context - tag instance where the DOM node is located\n   * @param   { String } attr - if expression\n   * @returns { IFExpr } a new IfExpr object\n   */\n  function createIfDirective(dom, tag, attr) {\n    return create(IfExpr).init(dom, tag, attr)\n  }\n\n  /**\n   * Walk the tag DOM to detect the expressions to evaluate\n   * @this Tag\n   * @param   { HTMLElement } root - root tag where we will start digging the expressions\n   * @param   { Boolean } mustIncludeRoot - flag to decide whether the root must be parsed as well\n   * @returns { Array } all the expressions found\n   */\n  function parseExpressions(root, mustIncludeRoot) {\n    var this$1 = this;\n\n    var expressions = [];\n\n    walkNodes(root, function (dom) {\n      var type = dom.nodeType;\n      var attr;\n      var tagImpl;\n\n      if (!mustIncludeRoot && dom === root) { return }\n\n      // text node\n      if (type === 3 && dom.parentNode.tagName !== 'STYLE' && tmpl.hasExpr(dom.nodeValue))\n        { expressions.push({dom: dom, expr: dom.nodeValue}); }\n\n      if (type !== 1) { return }\n\n      var isVirtual = dom.tagName === 'VIRTUAL';\n\n      // loop. each does it's own thing (for now)\n      if (attr = getAttribute(dom, LOOP_DIRECTIVE)) {\n        if(isVirtual) { setAttribute(dom, 'loopVirtual', true); } // ignore here, handled in _each\n        expressions.push(_each(dom, this$1, attr));\n        return false\n      }\n\n      // if-attrs become the new parent. Any following expressions (either on the current\n      // element, or below it) become children of this expression.\n      if (attr = getAttribute(dom, CONDITIONAL_DIRECTIVE)) {\n        expressions.push(createIfDirective(dom, this$1, attr));\n        return false\n      }\n\n      if (attr = getAttribute(dom, IS_DIRECTIVE)) {\n        if (tmpl.hasExpr(attr)) {\n          expressions.push({\n            isRtag: true,\n            expr: attr,\n            dom: dom,\n            attrs: [].slice.call(dom.attributes)\n          });\n\n          return false\n        }\n      }\n\n      // if this is a tag, stop traversing here.\n      // we ignore the root, since parseExpressions is called while we're mounting that root\n      tagImpl = get(dom);\n\n      if(isVirtual) {\n        if(getAttribute(dom, 'virtualized')) {dom.parentElement.removeChild(dom); } // tag created, remove from dom\n        if(!tagImpl && !getAttribute(dom, 'virtualized') && !getAttribute(dom, 'loopVirtual'))  // ok to create virtual tag\n          { tagImpl = { tmpl: dom.outerHTML }; }\n      }\n\n      if (tagImpl && (dom !== root || mustIncludeRoot)) {\n        var hasIsDirective = getAttribute(dom, IS_DIRECTIVE);\n        if(isVirtual && !hasIsDirective) { // handled in update\n          // can not remove attribute like directives\n          // so flag for removal after creation to prevent maximum stack error\n          setAttribute(dom, 'virtualized', true);\n          var tag = createTag(\n            {tmpl: dom.outerHTML},\n            {root: dom, parent: this$1},\n            dom.innerHTML\n          );\n\n          expressions.push(tag); // no return, anonymous tag, keep parsing\n        } else {\n          if (hasIsDirective && isVirtual)\n            { warn((\"Virtual tags shouldn't be used together with the \\\"\" + IS_DIRECTIVE + \"\\\" attribute - https://github.com/riot/riot/issues/2511\")); }\n\n          expressions.push(\n            initChild(\n              tagImpl,\n              {\n                root: dom,\n                parent: this$1\n              },\n              dom.innerHTML,\n              this$1\n            )\n          );\n          return false\n        }\n      }\n\n      // attribute expressions\n      parseAttributes.apply(this$1, [dom, dom.attributes, function (attr, expr) {\n        if (!expr) { return }\n        expressions.push(expr);\n      }]);\n    });\n\n    return expressions\n  }\n\n  /**\n   * Calls `fn` for every attribute on an element. If that attr has an expression,\n   * it is also passed to fn.\n   * @this Tag\n   * @param   { HTMLElement } dom - dom node to parse\n   * @param   { Array } attrs - array of attributes\n   * @param   { Function } fn - callback to exec on any iteration\n   */\n  function parseAttributes(dom, attrs, fn) {\n    var this$1 = this;\n\n    each(attrs, function (attr) {\n      if (!attr) { return false }\n\n      var name = attr.name;\n      var bool = isBoolAttr(name);\n      var expr;\n\n      if (contains(REF_DIRECTIVES, name) && dom.tagName.toLowerCase() !== YIELD_TAG) {\n        expr =  createRefDirective(dom, this$1, name, attr.value);\n      } else if (tmpl.hasExpr(attr.value)) {\n        expr = {dom: dom, expr: attr.value, attr: name, bool: bool};\n      }\n\n      fn(attr, expr);\n    });\n  }\n\n  /**\n   * Manage the mount state of a tag triggering also the observable events\n   * @this Tag\n   * @param { Boolean } value - ..of the isMounted flag\n   */\n  function setMountState(value) {\n    var ref = this.__;\n    var isAnonymous = ref.isAnonymous;\n    var skipAnonymous = ref.skipAnonymous;\n\n    define(this, 'isMounted', value);\n\n    if (!isAnonymous || !skipAnonymous) {\n      if (value) { this.trigger('mount'); }\n      else {\n        this.trigger('unmount');\n        this.off('*');\n        this.__.wasCreated = false;\n      }\n    }\n  }\n\n  /**\n   * Mount the current tag instance\n   * @returns { Tag } the current tag instance\n   */\n  function componentMount(tag$$1, dom, expressions, opts) {\n    var __ = tag$$1.__;\n    var root = __.root;\n    root._tag = tag$$1; // keep a reference to the tag just created\n\n    // Read all the attrs on this instance. This give us the info we need for updateOpts\n    parseAttributes.apply(__.parent, [root, root.attributes, function (attr, expr) {\n      if (!__.isAnonymous && RefExpr.isPrototypeOf(expr)) { expr.tag = tag$$1; }\n      attr.expr = expr;\n      __.instAttrs.push(attr);\n    }]);\n\n    // update the root adding custom attributes coming from the compiler\n    walkAttributes(__.impl.attrs, function (k, v) { __.implAttrs.push({name: k, value: v}); });\n    parseAttributes.apply(tag$$1, [root, __.implAttrs, function (attr, expr) {\n      if (expr) { expressions.push(expr); }\n      else { setAttribute(root, attr.name, attr.value); }\n    }]);\n\n    // initialiation\n    updateOpts.apply(tag$$1, [__.isLoop, __.parent, __.isAnonymous, opts, __.instAttrs]);\n\n    // add global mixins\n    var globalMixin = mixin(GLOBAL_MIXIN);\n\n    if (globalMixin && !__.skipAnonymous) {\n      for (var i in globalMixin) {\n        if (globalMixin.hasOwnProperty(i)) {\n          tag$$1.mixin(globalMixin[i]);\n        }\n      }\n    }\n\n    if (__.impl.fn) { __.impl.fn.call(tag$$1, opts); }\n\n    if (!__.skipAnonymous) { tag$$1.trigger('before-mount'); }\n\n    // parse layout after init. fn may calculate args for nested custom tags\n    each(parseExpressions.apply(tag$$1, [dom, __.isAnonymous]), function (e) { return expressions.push(e); });\n\n    tag$$1.update(__.item);\n\n    if (!__.isAnonymous && !__.isInline) {\n      while (dom.firstChild) { root.appendChild(dom.firstChild); }\n    }\n\n    define(tag$$1, 'root', root);\n\n    // if we need to wait that the parent \"mount\" or \"updated\" event gets triggered\n    if (!__.skipAnonymous && tag$$1.parent) {\n      var p = getImmediateCustomParent(tag$$1.parent);\n      p.one(!p.isMounted ? 'mount' : 'updated', function () {\n        setMountState.call(tag$$1, true);\n      });\n    } else {\n      // otherwise it's not a child tag we can trigger its mount event\n      setMountState.call(tag$$1, true);\n    }\n\n    tag$$1.__.wasCreated = true;\n\n    return tag$$1\n  }\n\n  /**\n   * Unmount the tag instance\n   * @param { Boolean } mustKeepRoot - if it's true the root node will not be removed\n   * @returns { Tag } the current tag instance\n   */\n  function tagUnmount(tag, mustKeepRoot, expressions) {\n    var __ = tag.__;\n    var root = __.root;\n    var tagIndex = __TAGS_CACHE.indexOf(tag);\n    var p = root.parentNode;\n\n    if (!__.skipAnonymous) { tag.trigger('before-unmount'); }\n\n    // clear all attributes coming from the mounted tag\n    walkAttributes(__.impl.attrs, function (name) {\n      if (startsWith(name, ATTRS_PREFIX))\n        { name = name.slice(ATTRS_PREFIX.length); }\n\n      removeAttribute(root, name);\n    });\n\n    // remove all the event listeners\n    tag.__.listeners.forEach(function (dom) {\n      Object.keys(dom[RIOT_EVENTS_KEY]).forEach(function (eventName) {\n        dom.removeEventListener(eventName, dom[RIOT_EVENTS_KEY][eventName]);\n      });\n    });\n\n    // remove tag instance from the global tags cache collection\n    if (tagIndex !== -1) { __TAGS_CACHE.splice(tagIndex, 1); }\n\n    // clean up the parent tags object\n    if (__.parent && !__.isAnonymous) {\n      var ptag = getImmediateCustomParent(__.parent);\n\n      if (__.isVirtual) {\n        Object\n          .keys(tag.tags)\n          .forEach(function (tagName) { return arrayishRemove(ptag.tags, tagName, tag.tags[tagName]); });\n      } else {\n        arrayishRemove(ptag.tags, __.tagName, tag);\n      }\n    }\n\n    // unmount all the virtual directives\n    if (tag.__.virts) {\n      each(tag.__.virts, function (v) {\n        if (v.parentNode) { v.parentNode.removeChild(v); }\n      });\n    }\n\n    // allow expressions to unmount themselves\n    unmountAll(expressions);\n    each(__.instAttrs, function (a) { return a.expr && a.expr.unmount && a.expr.unmount(); });\n\n    // clear the tag html if it's necessary\n    if (mustKeepRoot) { setInnerHTML(root, ''); }\n    // otherwise detach the root tag from the DOM\n    else if (p) { p.removeChild(root); }\n\n    // custom internal unmount function to avoid relying on the observable\n    if (__.onUnmount) { __.onUnmount(); }\n\n    // weird fix for a weird edge case #2409 and #2436\n    // some users might use your software not as you've expected\n    // so I need to add these dirty hacks to mitigate unexpected issues\n    if (!tag.isMounted) { setMountState.call(tag, true); }\n\n    setMountState.call(tag, false);\n\n    delete root._tag;\n\n    return tag\n  }\n\n  /**\n   * Tag creation factory function\n   * @constructor\n   * @param { Object } impl - it contains the tag template, and logic\n   * @param { Object } conf - tag options\n   * @param { String } innerHTML - html that eventually we need to inject in the tag\n   */\n  function createTag(impl, conf, innerHTML) {\n    if ( impl === void 0 ) impl = {};\n    if ( conf === void 0 ) conf = {};\n\n    var tag = conf.context || {};\n    var opts = conf.opts || {};\n    var parent = conf.parent;\n    var isLoop = conf.isLoop;\n    var isAnonymous = !!conf.isAnonymous;\n    var skipAnonymous = settings.skipAnonymousTags && isAnonymous;\n    var item = conf.item;\n    // available only for the looped nodes\n    var index = conf.index;\n    // All attributes on the Tag when it's first parsed\n    var instAttrs = [];\n    // expressions on this type of Tag\n    var implAttrs = [];\n    var tmpl = impl.tmpl;\n    var expressions = [];\n    var root = conf.root;\n    var tagName = conf.tagName || getName(root);\n    var isVirtual = tagName === 'virtual';\n    var isInline = !isVirtual && !tmpl;\n    var dom;\n\n    if (isInline || isLoop && isAnonymous) {\n      dom = root;\n    } else {\n      if (!isVirtual) { root.innerHTML = ''; }\n      dom = mkdom(tmpl, innerHTML, isSvg(root));\n    }\n\n    // make this tag observable\n    if (!skipAnonymous) { observable(tag); }\n\n    // only call unmount if we have a valid __TAG_IMPL (has name property)\n    if (impl.name && root._tag) { root._tag.unmount(true); }\n\n    define(tag, '__', {\n      impl: impl,\n      root: root,\n      skipAnonymous: skipAnonymous,\n      implAttrs: implAttrs,\n      isAnonymous: isAnonymous,\n      instAttrs: instAttrs,\n      innerHTML: innerHTML,\n      tagName: tagName,\n      index: index,\n      isLoop: isLoop,\n      isInline: isInline,\n      item: item,\n      parent: parent,\n      // tags having event listeners\n      // it would be better to use weak maps here but we can not introduce breaking changes now\n      listeners: [],\n      // these vars will be needed only for the virtual tags\n      virts: [],\n      wasCreated: false,\n      tail: null,\n      head: null\n    });\n\n    // tag protected properties\n    return [\n      ['isMounted', false],\n      // create a unique id to this tag\n      // it could be handy to use it also to improve the virtual dom rendering speed\n      ['_riot_id', uid()],\n      ['root', root],\n      ['opts', opts, { writable: true, enumerable: true }],\n      ['parent', parent || null],\n      // protect the \"tags\" and \"refs\" property from being overridden\n      ['tags', {}],\n      ['refs', {}],\n      ['update', function (data) { return componentUpdate(tag, data, expressions); }],\n      ['mixin', function () {\n        var mixins = [], len = arguments.length;\n        while ( len-- ) mixins[ len ] = arguments[ len ];\n\n        return componentMixin.apply(void 0, [ tag ].concat( mixins ));\n    }],\n      ['mount', function () { return componentMount(tag, dom, expressions, opts); }],\n      ['unmount', function (mustKeepRoot) { return tagUnmount(tag, mustKeepRoot, expressions); }]\n    ].reduce(function (acc, ref) {\n      var key = ref[0];\n      var value = ref[1];\n      var opts = ref[2];\n\n      define(tag, key, value, opts);\n      return acc\n    }, extend(tag, item))\n  }\n\n  /**\n   * Mount a tag creating new Tag instance\n   * @param   { Object } root - dom node where the tag will be mounted\n   * @param   { String } tagName - name of the riot tag we want to mount\n   * @param   { Object } opts - options to pass to the Tag instance\n   * @param   { Object } ctx - optional context that will be used to extend an existing class ( used in riot.Tag )\n   * @returns { Tag } a new Tag instance\n   */\n  function mount$1(root, tagName, opts, ctx) {\n    var impl = __TAG_IMPL[tagName];\n    var implClass = __TAG_IMPL[tagName].class;\n    var context = ctx || (implClass ? create(implClass.prototype) : {});\n    // cache the inner HTML to fix #855\n    var innerHTML = root._innerHTML = root._innerHTML || root.innerHTML;\n    var conf = extend({ root: root, opts: opts, context: context }, { parent: opts ? opts.parent : null });\n    var tag;\n\n    if (impl && root) { tag = createTag(impl, conf, innerHTML); }\n\n    if (tag && tag.mount) {\n      tag.mount(true);\n      // add this tag to the virtualDom variable\n      if (!contains(__TAGS_CACHE, tag)) { __TAGS_CACHE.push(tag); }\n    }\n\n    return tag\n  }\n\n\n\n  var tags = /*#__PURE__*/Object.freeze({\n    arrayishAdd: arrayishAdd,\n    getTagName: getName,\n    inheritParentProps: inheritParentProps,\n    mountTo: mount$1,\n    selectTags: query,\n    arrayishRemove: arrayishRemove,\n    getTag: get,\n    initChildTag: initChild,\n    moveChildTag: moveChild,\n    makeReplaceVirtual: makeReplaceVirtual,\n    getImmediateCustomParentTag: getImmediateCustomParent,\n    makeVirtual: makeVirtual,\n    moveVirtual: moveVirtual,\n    unmountAll: unmountAll,\n    createIfDirective: createIfDirective,\n    createRefDirective: createRefDirective\n  });\n\n  /**\n   * Riot public api\n   */\n  var settings$1 = settings;\n  var util = {\n    tmpl: tmpl,\n    brackets: brackets,\n    styleManager: styleManager,\n    vdom: __TAGS_CACHE,\n    styleNode: styleManager.styleNode,\n    // export the riot internal utils as well\n    dom: dom,\n    check: check,\n    misc: misc,\n    tags: tags\n  };\n\n  // export the core props/methods\n  var Tag$1 = Tag;\n  var tag$1 = tag;\n  var tag2$1 = tag2;\n  var mount$2 = mount;\n  var mixin$1 = mixin;\n  var update$2 = update$1;\n  var unregister$1 = unregister;\n  var version$1 = version;\n  var observable$1 = observable;\n\n  var riot$1 = extend({}, core, {\n    observable: observable,\n    settings: settings$1,\n    util: util,\n  });\n\n  exports.settings = settings$1;\n  exports.util = util;\n  exports.Tag = Tag$1;\n  exports.tag = tag$1;\n  exports.tag2 = tag2$1;\n  exports.mount = mount$2;\n  exports.mixin = mixin$1;\n  exports.update = update$2;\n  exports.unregister = unregister$1;\n  exports.version = version$1;\n  exports.observable = observable$1;\n  exports.default = riot$1;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","\n(function(tagger) {\n  if (typeof define === 'function' && define.amd) {\n    define(function(require, exports, module) { tagger(require('riot'), require, exports, module)})\n  } else if (typeof module !== 'undefined' && typeof module.exports !== 'undefined') {\n    tagger(require('riot'), require, exports, module)\n  } else {\n    tagger(window.riot)\n  }\n})(function(riot, require, exports, module) {\nriot.tag2('app-tag', '<div> <h1>Thie is Riot test.</h1> <button class=\"unmount-animation\" onclick=\"{animationUnmount}\" ref=\"button\">アンマウント！</button> </div>', 'app-tag h1,[data-is=\"app-tag\"] h1{ color: orange; display: flex; } app-tag .unmount-animation,[data-is=\"app-tag\"] .unmount-animation{ opacity: 1; transition: opacity 1s; } app-tag .unmount-animation.is-unmount,[data-is=\"app-tag\"] .unmount-animation.is-unmount{ opacity: 0; }', '', function(opts) {\nconst tag = this;\ntag.finishAnimation = false;\ntag.on('mount', e => {\n  var tl = anime.timeline({\n    duration: 500\n  });\n  tl.add({\n    targets: tag.refs.button,\n    opacity: 0,\n    duration: 1\n  }).add({\n    targets: tag.refs.button,\n    opacity: 1,\n    duration: 1000\n  });\n});\ntag.test = 'Hello Riot!';\n\ntag.animationUnmount = e => {\n  tag.refs.button.addEventListener('transitionend', e => {\n    console.log('きえた');\n    tag.unmount();\n  });\n  tag.refs.button.classList.add('is-unmount');\n};\n\ntag.on('before-unmount', e => {\n  console.log(tag);\n});\n});\nriot.tag2('raw-html', '<span></span>', '', '', function(opts) {\nthis.root.innerHTML = opts.content;\nthis.on('update', function () {\n  this.root.innerHTML = opts.content;\n});\n});});","import './tags.js'\n\nriot.mount('*');\n(function ($) {\n  $(() => {\n    if (!feature.touch) {\n      $('a[href^=\"#\"], .js-anchor-scroll').on('click', e => {\n        e.preventDefault()\n        let headerHeight = 0\n        let $target = $(e.currentTarget.attributes.href.value)\n        console.log($target)\n        let targetOffset = $target.offset().top\n        $('html,body').animate({\n            scrollTop: targetOffset - headerHeight - 10\n          },\n          300\n        )\n      })\n    }\n  })\n})(jQuery)\n\nconsole.log(`feature.touch = ${feature.touch}`)\n\n// anime.js サンプル\nconst animeSample = anime({\n  targets: '.js-anime',\n  translateX: 240,\n  rotate: 360,\n  duration: 800,\n  direction: 'alternate',\n  easing: 'easeInOutExpo',\n  loop: true\n})"]}