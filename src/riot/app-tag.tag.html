<app-tag>
  <div>
    <h1>Thie is Riot test.</h1>
    <button class="unmount-animation" onclick="{ animationUnmount }" ref="button">アンマウント！</button>
  </div>

  <style>
    :scope {

      h1 {
        color: orange;
        display: flex;
      }

      .unmount-animation {
        opacity: 1;
        transition: opacity 1s;

        &.is-unmount {
          opacity: 0;
        }
      }
    }
  </style>

  <script>
    const tag = this
    tag.finishAnimation = false

    tag.on('mount', e => {
      var tl = anime.timeline({
        duration: 500
      })
      tl.add({
        targets: tag.refs.button,
        opacity: 0,
        duration: 1
      })
      .add({
        targets: tag.refs.button,
        opacity: 1,
        duration: 1000
      })
    })

    tag.test = 'Hello Riot!'

    tag.animationUnmount = e => {
      tag.refs.button.addEventListener('transitionend', e => {
        console.log('きえた')
        tag.unmount()
      })
      tag.refs.button.classList.add('is-unmount')
    }

    tag.on('before-unmount', e => {
      console.log(tag)
    })
  </script>
</app-tag>