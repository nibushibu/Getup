<my-app>
  <link rel="stylesheet" href="{ window.rootPath }css/main.css" />
  <link rel="stylesheet" href="{ window.rootPath }css/my-app.css" />
  <h1>This is Riot.</h1>
  <ui-icon
    data-icon="globe"
    data-fill-gradient="{false}"
    class="c-test-icon"
  ></ui-icon>
  <p>{ state.test }</p>
  <p>
    <button
      class="unmount-animation"
      onclick="{ animationUnmount }"
      data-ref="button"
    >
      my-appをアンマウント
    </button>
  </p>
  <ul>
    <li each="{item in state.list}">{item}</li>
  </ul>
  <p>
    <raw-html data-html="<b>コンポーネントのテスト</b>"></raw-html>
  </p>
  <p></p>
  <h2>スロットの内容</h2>
  <slot></slot>
  <button data-ref="change-button" onclick="{change}">Change</button>
  <my-list data-number=""></my-list>

  <script>
    export default {
      state: {
        finishAnimation: false,
        test: 'Hello Riot!',
        list: ['riot', 'vue', 'react'],
        obj: { org: 'riotjs', repo: 'riot' }
      },
      animationUnmount(clickEvent) {
        this.root.shadow
          .querySelector('[data-ref="button"]')
          .addEventListener('transitionend', (event) => {
            console.log('button transitionend')
            this.unmount()
          })
        this.root.shadow
          .querySelector('[data-ref="button"]')
          .classList.add('is-unmount')
      },
      onMounted() {
        requestAnimationFrame(() => {
          const myList = this.root.shadow.querySelector('my-list')
          // myList.component.update({ list: ['☺️', '😊', '😎'] })
          myList.component.state.list = ['☺️', '😊', '😎']
          myList.component.doSomethingfromParent = () => {
            console.log('doSomethingfromParent')
          }
          myList.component.update()
        })
      },
      change() {
        const targetElement = this.root.shadow.querySelector('raw-html')
        targetElement.dataset.html = '<b>変更された</b>'
      },
      eventCastTest() {
        console.log('eventCastTest')
      }
    }
  </script>
</my-app>
